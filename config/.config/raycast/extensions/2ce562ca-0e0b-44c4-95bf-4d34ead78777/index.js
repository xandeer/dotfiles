var ql=Object.create;var Et=Object.defineProperty,Fl=Object.defineProperties,kl=Object.getOwnPropertyDescriptor,Ll=Object.getOwnPropertyDescriptors,Bl=Object.getOwnPropertyNames,Qa=Object.getOwnPropertySymbols,Dl=Object.getPrototypeOf,Ja=Object.prototype.hasOwnProperty,Il=Object.prototype.propertyIsEnumerable;var Ga=(t,r,o)=>r in t?Et(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,br=(t,r)=>{for(var o in r||(r={}))Ja.call(r,o)&&Ga(t,o,r[o]);if(Qa)for(var o of Qa(r))Il.call(r,o)&&Ga(t,o,r[o]);return t},yr=(t,r)=>Fl(t,Ll(r)),Za=t=>Et(t,"__esModule",{value:!0});var T=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Wl=(t,r)=>{for(var o in r)Et(t,o,{get:r[o],enumerable:!0})},Xa=(t,r,o,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of Bl(r))!Ja.call(t,u)&&(o||u!=="default")&&Et(t,u,{get:()=>r[u],enumerable:!(a=kl(r,u))||a.enumerable});return t},be=(t,r)=>Xa(Za(Et(t!=null?ql(Dl(t)):{},"default",!r&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Ml=(t=>(r,o)=>t&&t.get(r)||(o=Xa(Za({}),r,1),t&&t.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Un=T(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.getDefaultLocale=zl;xe.setDefaultLocale=Nl;xe.getLocaleData=jl;xe.addLocaleData=xl;xe.resolveLocale=$l;var Ka="en",$n={},xn={};function zl(){return Ka}function Nl(t){Ka=t}function jl(t){return $n[t]}function xl(t){if(!t)throw new Error("No locale data passed");$n[t.locale]=t,xn[t.locale.toLowerCase()]=t.locale}function $l(t){if($n[t])return t;if(xn[t.toLowerCase()])return xn[t.toLowerCase()]}});var ti=T(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.default=Ul;gr.resolveLocaleLookup=Vn;var ei=Un();function Ul(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.localeMatcher||"lookup";switch(o){case"lookup":return Vn(t);case"best fit":return Vn(t);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(o))}}function Vn(t){var r=(0,ei.resolveLocale)(t);if(r)return r;for(var o=t.split("-");t.length>1;){o.pop(),t=o.join("-");var a=(0,ei.resolveLocale)(t);if(a)return a}}});var ri=T(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.default=void 0;var c={af:function(r){return r==1?"one":"other"},am:function(r){return r>=0&&r<=1?"one":"other"},ar:function(r){var o=String(r).split("."),a=Number(o[0])==r,u=a&&o[0].slice(-2);return r==0?"zero":r==1?"one":r==2?"two":u>=3&&u<=10?"few":u>=11&&u<=99?"many":"other"},ast:function(r){var o=String(r).split("."),a=!o[1];return r==1&&a?"one":"other"},be:function(r){var o=String(r).split("."),a=Number(o[0])==r,u=a&&o[0].slice(-1),l=a&&o[0].slice(-2);return u==1&&l!=11?"one":u>=2&&u<=4&&(l<12||l>14)?"few":a&&u==0||u>=5&&u<=9||l>=11&&l<=14?"many":"other"},br:function(r){var o=String(r).split("."),a=Number(o[0])==r,u=a&&o[0].slice(-1),l=a&&o[0].slice(-2),m=a&&o[0].slice(-6);return u==1&&l!=11&&l!=71&&l!=91?"one":u==2&&l!=12&&l!=72&&l!=92?"two":(u==3||u==4||u==9)&&(l<10||l>19)&&(l<70||l>79)&&(l<90||l>99)?"few":r!=0&&a&&m==0?"many":"other"},bs:function(r){var o=String(r).split("."),a=o[0],u=o[1]||"",l=!o[1],m=a.slice(-1),d=a.slice(-2),p=u.slice(-1),_=u.slice(-2);return l&&m==1&&d!=11||p==1&&_!=11?"one":l&&m>=2&&m<=4&&(d<12||d>14)||p>=2&&p<=4&&(_<12||_>14)?"few":"other"},ceb:function(r){var o=String(r).split("."),a=o[0],u=o[1]||"",l=!o[1],m=a.slice(-1),d=u.slice(-1);return l&&(a==1||a==2||a==3)||l&&m!=4&&m!=6&&m!=9||!l&&d!=4&&d!=6&&d!=9?"one":"other"},cs:function(r){var o=String(r).split("."),a=o[0],u=!o[1];return r==1&&u?"one":a>=2&&a<=4&&u?"few":u?"other":"many"},cy:function(r){return r==0?"zero":r==1?"one":r==2?"two":r==3?"few":r==6?"many":"other"},da:function(r){var o=String(r).split("."),a=o[0],u=Number(o[0])==r;return r==1||!u&&(a==0||a==1)?"one":"other"},dsb:function(r){var o=String(r).split("."),a=o[0],u=o[1]||"",l=!o[1],m=a.slice(-2),d=u.slice(-2);return l&&m==1||d==1?"one":l&&m==2||d==2?"two":l&&(m==3||m==4)||d==3||d==4?"few":"other"},dz:function(r){return"other"},ff:function(r){return r>=0&&r<2?"one":"other"},fr:function(r){var o=String(r).split("."),a=o[0],u=!o[1],l=a.slice(-6);return r>=0&&r<2?"one":a!=0&&l==0&&u?"many":"other"},ga:function(r){var o=String(r).split("."),a=Number(o[0])==r;return r==1?"one":r==2?"two":a&&r>=3&&r<=6?"few":a&&r>=7&&r<=10?"many":"other"},gd:function(r){var o=String(r).split("."),a=Number(o[0])==r;return r==1||r==11?"one":r==2||r==12?"two":a&&r>=3&&r<=10||a&&r>=13&&r<=19?"few":"other"},he:function(r){var o=String(r).split("."),a=o[0],u=!o[1],l=Number(o[0])==r,m=l&&o[0].slice(-1);return r==1&&u?"one":a==2&&u?"two":u&&(r<0||r>10)&&l&&m==0?"many":"other"},is:function(r){var o=String(r).split("."),a=o[0],u=Number(o[0])==r,l=a.slice(-1),m=a.slice(-2);return u&&l==1&&m!=11||!u?"one":"other"},ksh:function(r){return r==0?"zero":r==1?"one":"other"},lt:function(r){var o=String(r).split("."),a=o[1]||"",u=Number(o[0])==r,l=u&&o[0].slice(-1),m=u&&o[0].slice(-2);return l==1&&(m<11||m>19)?"one":l>=2&&l<=9&&(m<11||m>19)?"few":a!=0?"many":"other"},lv:function(r){var o=String(r).split("."),a=o[1]||"",u=a.length,l=Number(o[0])==r,m=l&&o[0].slice(-1),d=l&&o[0].slice(-2),p=a.slice(-2),_=a.slice(-1);return l&&m==0||d>=11&&d<=19||u==2&&p>=11&&p<=19?"zero":m==1&&d!=11||u==2&&_==1&&p!=11||u!=2&&_==1?"one":"other"},mk:function(r){var o=String(r).split("."),a=o[0],u=o[1]||"",l=!o[1],m=a.slice(-1),d=a.slice(-2),p=u.slice(-1),_=u.slice(-2);return l&&m==1&&d!=11||p==1&&_!=11?"one":"other"},mt:function(r){var o=String(r).split("."),a=Number(o[0])==r,u=a&&o[0].slice(-2);return r==1?"one":r==0||u>=2&&u<=10?"few":u>=11&&u<=19?"many":"other"},pa:function(r){return r==0||r==1?"one":"other"},pl:function(r){var o=String(r).split("."),a=o[0],u=!o[1],l=a.slice(-1),m=a.slice(-2);return r==1&&u?"one":u&&l>=2&&l<=4&&(m<12||m>14)?"few":u&&a!=1&&(l==0||l==1)||u&&l>=5&&l<=9||u&&m>=12&&m<=14?"many":"other"},pt:function(r){var o=String(r).split("."),a=o[0];return a==0||a==1?"one":"other"},ro:function(r){var o=String(r).split("."),a=!o[1],u=Number(o[0])==r,l=u&&o[0].slice(-2);return r==1&&a?"one":!a||r==0||l>=2&&l<=19?"few":"other"},ru:function(r){var o=String(r).split("."),a=o[0],u=!o[1],l=a.slice(-1),m=a.slice(-2);return u&&l==1&&m!=11?"one":u&&l>=2&&l<=4&&(m<12||m>14)?"few":u&&l==0||u&&l>=5&&l<=9||u&&m>=11&&m<=14?"many":"other"},se:function(r){return r==1?"one":r==2?"two":"other"},si:function(r){var o=String(r).split("."),a=o[0],u=o[1]||"";return r==0||r==1||a==0&&u==1?"one":"other"},sl:function(r){var o=String(r).split("."),a=o[0],u=!o[1],l=a.slice(-2);return u&&l==1?"one":u&&l==2?"two":u&&(l==3||l==4)||!u?"few":"other"}};c.as=c.am;c.az=c.af;c.bg=c.af;c.bn=c.am;c.ca=c.ast;c.ce=c.af;c.chr=c.af;c.de=c.ast;c.ee=c.af;c.el=c.af;c.en=c.ast;c.es=c.af;c.et=c.ast;c.eu=c.af;c.fa=c.am;c.fi=c.ast;c.fil=c.ceb;c.fo=c.af;c.fur=c.af;c.fy=c.ast;c.gl=c.ast;c.gu=c.am;c.ha=c.af;c.hi=c.am;c.hr=c.bs;c.hsb=c.dsb;c.hu=c.af;c.hy=c.ff;c.ia=c.ast;c.id=c.dz;c.ig=c.dz;c.it=c.ast;c.ja=c.dz;c.jgo=c.af;c.jv=c.dz;c.ka=c.af;c.kea=c.dz;c.kk=c.af;c.kl=c.af;c.km=c.dz;c.kn=c.am;c.ko=c.dz;c.ku=c.af;c.ky=c.af;c.lb=c.af;c.lkt=c.dz;c.lo=c.dz;c.ml=c.af;c.mn=c.af;c.mr=c.af;c.ms=c.dz;c.my=c.dz;c.nb=c.af;c.ne=c.af;c.nl=c.ast;c.nn=c.af;c.no=c.af;c.or=c.af;c.pcm=c.am;c.ps=c.af;c.rm=c.af;c.sah=c.dz;c.sd=c.af;c.sk=c.cs;c.so=c.af;c.sq=c.af;c.sr=c.bs;c.su=c.dz;c.sv=c.ast;c.sw=c.ast;c.ta=c.af;c.te=c.af;c.th=c.dz;c.ti=c.pa;c.tk=c.af;c.to=c.dz;c.tr=c.af;c.ug=c.af;c.uk=c.ru;c.ur=c.ast;c.uz=c.af;c.vi=c.dz;c.wae=c.af;c.wo=c.dz;c.yi=c.ast;c.yo=c.dz;c.yue=c.dz;c.zh=c.dz;c.zu=c.am;var Vl=c;_r.default=Vl});var ni=T(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.default=Hl;function Hl(t){return t==="pt-PT"?t:Ql(t)}var Yl=/^([a-z0-9]+)/i;function Ql(t){var r=t.match(Yl);if(!r)throw new TypeError("Invalid locale: ".concat(t));return r[1]}});var si=T(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.default=void 0;var oi=ui(ri()),ai=ui(ni());function ui(t){return t&&t.__esModule?t:{default:t}}function Gl(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ii(t,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Jl(t,r,o){return r&&ii(t.prototype,r),o&&ii(t,o),t}var Zl=function(){function t(r,o){Gl(this,t);var a=t.supportedLocalesOf(r);if(a.length===0)throw new RangeError("Unsupported locale: "+r);if(o&&o.type!=="cardinal")throw new RangeError('Only "cardinal" "type" is supported');this.$=oi.default[(0,ai.default)(a[0])]}return Jl(t,[{key:"select",value:function(o){return this.$(o)}}],[{key:"supportedLocalesOf",value:function(o){return typeof o=="string"&&(o=[o]),o.filter(function(a){return oi.default[(0,ai.default)(a)]})}}]),t}();Sr.default=Zl});var Gn=T(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.default=nt.UNITS=void 0;var rt=Un(),mi=hi(ti()),Qn=hi(si());function hi(t){return t&&t.__esModule?t:{default:t}}function wr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wr=function(o){return typeof o}:wr=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wr(t)}function Xl(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){vr(t,u,o[u])})}return t}function li(t,r){return tf(t)||ef(t,r)||Kl()}function Kl(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ef(t,r){var o=[],a=!0,u=!1,l=void 0;try{for(var m=t[Symbol.iterator](),d;!(a=(d=m.next()).done)&&(o.push(d.value),!(r&&o.length===r));a=!0);}catch(p){u=!0,l=p}finally{try{!a&&m.return!=null&&m.return()}finally{if(u)throw l}}return o}function tf(t){if(Array.isArray(t))return t}function rf(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fi(t,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function nf(t,r,o){return r&&fi(t.prototype,r),o&&fi(t,o),t}function vr(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var pi=["second","minute","hour","day","week","month","quarter","year"];nt.UNITS=pi;var of=["auto","always"],ci=["long","short","narrow"],af=["lookup","best fit"],ot=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};rf(this,t),vr(this,"numeric","always"),vr(this,"style","long"),vr(this,"localeMatcher","lookup");var a=o.numeric,u=o.style,l=o.styleFallback,m=o.localeMatcher;if(a!==void 0){if(of.indexOf(a)<0)throw new RangeError('Invalid "numeric" option: '.concat(a));this.numeric=a}if(u!==void 0){if(ci.indexOf(u)<0&&!l)throw new RangeError('Invalid "style" option: '.concat(u));this.style=u}if(m!==void 0){if(af.indexOf(m)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(m));this.localeMatcher=m}if(typeof r=="string"&&(r=[r]),r.push((0,rt.getDefaultLocale)()),this.locale=t.supportedLocalesOf(r,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");if(Qn.default.supportedLocalesOf(this.locale).length>0?this.pluralRules=new Qn.default(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),typeof Intl<"u"&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=(0,mi.default)(this.locale,{localeMatcher:this.localeMatcher}),l)for(var d=Object.keys((0,rt.getLocaleData)(this.locale)),p=[this.style].concat(ci,[d[0]]),_=0;_<p.length;_++){var P=p[_];if(d.indexOf(P)>=0){this.style=P;break}}}return nf(t,[{key:"format",value:function(){var o=di(arguments),a=li(o,2),u=a[0],l=a[1];return this.getRule(u,l).replace("{0}",this.formatNumber(Math.abs(u)))}},{key:"formatToParts",value:function(){var o=di(arguments),a=li(o,2),u=a[0],l=a[1],m=this.getRule(u,l),d=m.indexOf("{0}");if(d<0)return[{type:"literal",value:m}];var p=[];return d>0&&p.push({type:"literal",value:m.slice(0,d)}),p=p.concat(this.formatNumberToParts(Math.abs(u)).map(function(_){return Xl({},_,{unit:l})})),d+3<m.length-1&&p.push({type:"literal",value:m.slice(d+3)}),p}},{key:"getRule",value:function(o,a){var u=(0,rt.getLocaleData)(this.locale)[this.style][a];if(typeof u=="string")return u;if(this.numeric==="auto"){if(o===-2||o===-1){var l=u["previous".concat(o===-1?"":"-"+Math.abs(o))];if(l)return l}else if(o===1||o===2){var m=u["next".concat(o===1?"":"-"+Math.abs(o))];if(m)return m}else if(o===0&&u.current)return u.current}var d=u[cf(o)?"past":"future"];if(typeof d=="string")return d;var p=this.pluralRules&&this.pluralRules.select(Math.abs(o))||"other";return d[p]||d.other}},{key:"formatNumber",value:function(o){return this.numberFormat?this.numberFormat.format(o):String(o)}},{key:"formatNumberToParts",value:function(o){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(o):[{type:"integer",value:this.formatNumber(o)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}]),t}();nt.default=ot;ot.supportedLocalesOf=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string")t=[t];else if(!Array.isArray(t))throw new TypeError('Invalid "locales" argument');return t.filter(function(o){return(0,mi.default)(o,r)})};ot.addLocale=rt.addLocaleData;ot.setDefaultLocale=rt.setDefaultLocale;ot.getDefaultLocale=rt.getDefaultLocale;ot.PluralRules=Qn.default;var Yn='Invalid "unit" argument';function uf(t){if(wr(t)==="symbol")throw new TypeError(Yn);if(typeof t!="string")throw new RangeError("".concat(Yn,": ").concat(t));if(t[t.length-1]==="s"&&(t=t.slice(0,t.length-1)),pi.indexOf(t)<0)throw new RangeError("".concat(Yn,": ").concat(t));return t}var sf='Invalid "number" argument';function lf(t){if(t=Number(t),Number.isFinite&&!Number.isFinite(t))throw new RangeError("".concat(sf,": ").concat(t));return t}function ff(t){return 1/t===-1/0}function cf(t){return t<0||t===0&&ff(t)}function di(t){if(t.length<2)throw new TypeError('"unit" argument is required');return[lf(t[0]),uf(t[1])]}});var yi=T((Jn,bi)=>{"use strict";Jn=bi.exports=Gn().default;Jn.default=Gn().default});var _i=T(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.default=void 0;function qt(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qt=function(o){return typeof o}:qt=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},qt(t)}function df(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function gi(t,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function mf(t,r,o){return r&&gi(t.prototype,r),o&&gi(t,o),t}function hf(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var pf=function(){function t(){df(this,t),hf(this,"cache",{})}return mf(t,[{key:"get",value:function(){for(var o=this.cache,a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];for(var m=0;m<u.length;m++){var d=u[m];if(qt(o)!=="object")return;o=o[d]}return o}},{key:"put",value:function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];for(var l=a.pop(),m=a.pop(),d=this.cache,p=0;p<a.length;p++){var _=a[p];qt(d[_])!=="object"&&(d[_]={}),d=d[_]}return d[m]=l}}]),t}();Rr.default=pf});var Pr=T(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.default=bf;Ft.intlDateTimeFormatSupportedLocale=yf;Ft.intlDateTimeFormatSupported=Si;function Tr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tr=function(o){return typeof o}:Tr=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Tr(t)}function bf(t,r){for(var u=t,o=Array.isArray(u),a=0,u=o?u:u[Symbol.iterator]();;){var l;if(o){if(a>=u.length)break;l=u[a++]}else{if(a=u.next(),a.done)break;l=a.value}var m=l;if(r(m))return m;for(var d=m.split("-");d.length>1;)if(d.pop(),m=d.join("-"),r(m))return m}throw new Error("No locale data has been registered for any of the locales: ".concat(t.join(", ")))}function yf(t){if(Si())return Intl.DateTimeFormat.supportedLocalesOf(t)[0]}function Si(){var t=(typeof Intl>"u"?"undefined":Tr(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}});var $e=T(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.getSecondsInUnit=gf;N.year=N.month=N.week=N.day=N.hour=N.minute=void 0;var Zn=60;N.minute=Zn;var Xn=60*Zn;N.hour=Xn;var kt=24*Xn;N.day=kt;var wi=7*kt;N.week=wi;var vi=30.44*kt;N.month=vi;var Ri=146097/400*kt;N.year=Ri;function gf(t){switch(t){case"second":return 1;case"minute":return Zn;case"hour":return Xn;case"day":return kt;case"week":return wi;case"month":return vi;case"year":return Ri}}});var eo=T(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.default=Sf;var _f=$e();function Sf(t){return t.factor!==void 0?t.factor:(0,_f.getSecondsInUnit)(t.unit||t.formatAs)||1}});var at=T(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.getRoundFunction=wf;Cr.getDiffRatioToNextRoundedNumber=vf;function wf(t){switch(t){case"floor":return Math.floor;default:return Math.round}}function vf(t){switch(t){case"floor":return 1;default:return .5}}});var no=T(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.default=Tf;var to=$e(),Rf=at();function Ar(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ar=function(o){return typeof o}:Ar=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ar(t)}function Tf(t,r){var o=r.prevStep,a=r.timestamp,u=r.now,l=r.future,m=r.round,d;return o&&(o.id||o.unit)&&(d=t["threshold_for_".concat(o.id||o.unit)]),d===void 0&&t.threshold!==void 0&&(d=t.threshold,typeof d=="function"&&(d=d(u,l))),d===void 0&&(d=t.minTime),Ar(d)==="object"&&(o&&o.id&&d[o.id]!==void 0?d=d[o.id]:d=d.default),typeof d=="function"&&(d=d(a,{future:l,getMinTimeForUnit:function(_,P){return Ti(_,P||o&&o.formatAs,{round:m})}})),d===void 0&&t.test&&(t.test(a,{now:u,future:l})?d=0:d=9007199254740991),d===void 0&&(o?t.formatAs&&o.formatAs&&(d=Ti(t.formatAs,o.formatAs,{round:m})):d=0),d===void 0&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(t,null,2)),d}function Ti(t,r,o){var a=o.round,u=(0,to.getSecondsInUnit)(t),l;if(r==="now"?l=(0,to.getSecondsInUnit)(t):l=(0,to.getSecondsInUnit)(r),u!==void 0&&l!==void 0)return u-l*(1-(0,Rf.getDiffRatioToNextRoundedNumber)(a))}});var Ai=T(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.default=qf;var Pf=Pi(eo()),Cf=Pi(no()),Af=at();function Pi(t){return t&&t.__esModule?t:{default:t}}function Of(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Ef(t,u,o[u])})}return t}function Ef(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function qf(t,r,o){var a=o.now,u=o.future,l=o.round,m=o.units,d=o.getNextStep;t=kf(t,m);var p=Ff(t,r,{now:a,future:u,round:l});if(d){if(p){var _=t[t.indexOf(p)-1],P=t[t.indexOf(p)+1];return[_,p,P]}return[void 0,void 0,t[0]]}return p}function Ff(t,r,o){var a=o.now,u=o.future,l=o.round;if(t.length!==0){var m=Ci(t,r,{now:a,future:u||r<0,round:l});if(m!==-1){var d=t[m];if(d.granularity){var p=(0,Af.getRoundFunction)(l)(Math.abs(r)/(0,Pf.default)(d)/d.granularity)*d.granularity;if(p===0&&m>0)return t[m-1]}return d}}}function Ci(t,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=(0,Cf.default)(t[a],Of({prevStep:t[a-1],timestamp:o.now-r*1e3},o));return u===void 0||Math.abs(r)<u?a-1:a===t.length-1?a:Ci(t,r,o,a+1)}function kf(t,r){return t.filter(function(o){var a=o.unit,u=o.formatAs;return a=a||u,a?r.indexOf(a)>=0:!0})}});var Ei=T(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.default=Lf;var Oi=$e(),ao=at();function Lf(t,r,o){var a=o.now,u=o.round;if(!!(0,Oi.getSecondsInUnit)(t)){var l=(0,Oi.getSecondsInUnit)(t)*1e3,m=r>a,d=Math.abs(r-a),p=(0,ao.getRoundFunction)(u)(d/l)*l;return m?p>0?d-p+Df(u,l):d-p+1:-(d-p)+Bf(u,l)}}function Bf(t,r){return(0,ao.getDiffRatioToNextRoundedNumber)(t)*r}function Df(t,r){return(1-(0,ao.getDiffRatioToNextRoundedNumber)(t))*r+1}});var Li=T(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=Nf;Ue.getStepChangesAt=Fi;Ue.getTimeToStepChange=ki;Ue.INFINITY=void 0;var If=qi(Ei()),Wf=qi(no()),Mf=at();function qi(t){return t&&t.__esModule?t:{default:t}}var zf=365*24*60*60*1e3,uo=1e3*zf;Ue.INFINITY=uo;function Nf(t,r,o){var a=o.prevStep,u=o.nextStep,l=o.now,m=o.future,d=o.round,p=t.getTime?t.getTime():t,_=function(A){return(0,If.default)(A,p,{now:l,round:d})},P=ki(m?r:u,p,{future:m,now:l,round:d,prevStep:m?a:r});if(P!==void 0){var R;if(r&&(r.getTimeToNextUpdate&&(R=r.getTimeToNextUpdate(p,{getTimeToNextUpdateForUnit:_,getRoundFunction:Mf.getRoundFunction,now:l,future:m,round:d})),R===void 0)){var S=r.unit||r.formatAs;S&&(R=_(S))}return R===void 0?P:Math.min(R,P)}}function Fi(t,r,o){var a=o.now,u=o.future,l=o.round,m=o.prevStep,d=(0,Wf.default)(t,{timestamp:r,now:a,future:u,round:l,prevStep:m});if(d!==void 0)return u?r-d*1e3+1:d===0&&r===a?uo:r+d*1e3}function ki(t,r,o){var a=o.now,u=o.future,l=o.round,m=o.prevStep;if(t){var d=Fi(t,r,{now:a,future:u,round:l,prevStep:m});return d===void 0?void 0:d-a}else return u?r-a+1:uo}});var Di=T(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.getLocaleData=jf;Or.addLocaleData=xf;var Bi={};function jf(t){return Bi[t]}function xf(t){if(!t)throw new Error("[javascript-time-ago] No locale data passed.");Bi[t.locale]=t}});var so=T(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.default=void 0;var $f=[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}];Er.default=$f});var lo=T(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.default=void 0;var Uf=Vf(so());function Vf(t){return t&&t.__esModule?t:{default:t}}var Hf={steps:Uf.default,labels:"long"};qr.default=Hf});var fo=T(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.default=void 0;var Ii=Yf(lo());function Yf(t){return t&&t.__esModule?t:{default:t}}function Qf(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Gf(t,u,o[u])})}return t}function Gf(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var Jf=Qf({},Ii.default,{steps:Ii.default.steps.filter(function(t){return t.formatAs!=="second"})});Fr.default=Jf});var Lr=T(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.default=void 0;var M=$e(),Zf=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:M.minute,unit:"minute"},{threshold:2.5*M.minute,granularity:5,factor:M.minute,unit:"minute"},{threshold:22.5*M.minute,factor:.5*M.hour,unit:"half-hour"},{threshold:42.5*M.minute,threshold_for_minute:52.5*M.minute,factor:M.hour,unit:"hour"},{threshold:20.5/24*M.day,factor:M.day,unit:"day"},{threshold:5.5*M.day,factor:M.week,unit:"week"},{threshold:3.5*M.week,factor:M.month,unit:"month"},{threshold:10.5*M.month,factor:M.year,unit:"year"}];kr.default=Zf});var Wi=T(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.default=void 0;var Xf=Kf(Lr());function Kf(t){return t&&t.__esModule?t:{default:t}}var ec={gradation:Xf.default,flavour:"long",units:["now","minute","hour","day","week","month","year"]};Br.default=ec});var Mi=T(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.default=void 0;var tc=rc(Lr());function rc(t){return t&&t.__esModule?t:{default:t}}var nc={gradation:tc.default,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};Dr.default=nc});var zi=T(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.getDate=oc;function oc(t){return t instanceof Date?t:new Date(t)}});var $i=T(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});Object.defineProperty(H,"approximate",{enumerable:!0,get:function(){return Ni.default}});Object.defineProperty(H,"convenient",{enumerable:!0,get:function(){return Ni.default}});Object.defineProperty(H,"round",{enumerable:!0,get:function(){return ji.default}});Object.defineProperty(H,"canonical",{enumerable:!0,get:function(){return ji.default}});Object.defineProperty(H,"minute",{enumerable:!0,get:function(){return it.minute}});Object.defineProperty(H,"hour",{enumerable:!0,get:function(){return it.hour}});Object.defineProperty(H,"day",{enumerable:!0,get:function(){return it.day}});Object.defineProperty(H,"week",{enumerable:!0,get:function(){return it.week}});Object.defineProperty(H,"month",{enumerable:!0,get:function(){return it.month}});Object.defineProperty(H,"year",{enumerable:!0,get:function(){return it.year}});Object.defineProperty(H,"getDate",{enumerable:!0,get:function(){return ac.getDate}});var Ni=xi(Lr()),ji=xi(so()),it=$e(),ac=zi();function xi(t){return t&&t.__esModule?t:{default:t}}});var Ui=T(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.default=sc;function Ir(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ir=function(o){return typeof o}:Ir=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},Ir(t)}function ic(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){uc(t,u,o[u])})}return t}function uc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function sc(t){var r=ic({},t);if(r.minTime!==void 0){if(Ir(r.minTime)==="object")for(var o=Object.keys(r.minTime),a=0;a<o.length;a++){var u=o[a];u==="default"?r.threshold=r.minTime.default:r["threshold_for_".concat(u)]=r.minTime[u]}else r.threshold=r.minTime;delete r.minTime}return r.formatAs&&(r.unit=r.formatAs,delete r.formatAs),r}});var Vi=T(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.default=mc;var lc=fc(Ui());function fc(t){return t&&t.__esModule?t:{default:t}}function cc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){dc(t,u,o[u])})}return t}function dc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function mc(t){var r=cc({},t);return r.steps&&(r.gradation=r.steps.map(lc.default),delete r.steps),r.labels&&(r.flavour=r.labels,delete r.labels),r}});var Lt=T(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.default=void 0;var Hi=$i(),hc=Pr(),wm=pc(Vi());function pc(t){return t&&t.__esModule?t:{default:t}}var po=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],le={},bc={minTime:function(r,o){var a=o.future,u=o.getMinTimeForUnit;return u("day")},format:function(r,o){return le[o]||(le[o]={}),le[o].dayMonth||(le[o].dayMonth=new Intl.DateTimeFormat(o,{month:"short",day:"numeric"})),le[o].dayMonth.format((0,Hi.getDate)(r))}},yc={minTime:function(r,o){var a=o.future;if(a){var u=new Date(new Date(r).getFullYear(),0).getTime()-1;return(r-u)/1e3}else{var l=new Date(new Date(r).getFullYear()+1,0).getTime();return(l-r)/1e3}},format:function(r,o){return le[o]||(le[o]={}),le[o].dayMonthYear||(le[o].dayMonthYear=new Intl.DateTimeFormat(o,{year:"numeric",month:"short",day:"numeric"})),le[o].dayMonthYear.format((0,Hi.getDate)(r))}};(0,hc.intlDateTimeFormatSupported)()?po.push(bc,yc):po.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var gc={steps:po,labels:["mini","short-time","narrow","short"]};Wr.default=gc});var Qi=T(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.default=void 0;var Yi=_c(Lt());function _c(t){return t&&t.__esModule?t:{default:t}}function Sc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){wc(t,u,o[u])})}return t}function wc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var vc=Sc({},Yi.default,{steps:[{formatAs:"now"}].concat(Yi.default.steps)});Mr.default=vc});var bo=T(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.default=void 0;var Gi=Rc(Lt());function Rc(t){return t&&t.__esModule?t:{default:t}}function Tc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Pc(t,u,o[u])})}return t}function Pc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var Cc=Tc({},Gi.default,{steps:Gi.default.steps.filter(function(t){return t.formatAs!=="second"})});zr.default=Cc});var Zi=T(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.default=void 0;var Ji=Ac(bo());function Ac(t){return t&&t.__esModule?t:{default:t}}function Oc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Ec(t,u,o[u])})}return t}function Ec(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var qc=Oc({},Ji.default,{steps:[{formatAs:"now"}].concat(Ji.default.steps)});Nr.default=qc});var eu=T(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var Fc=$e(),Xi=kc(Lt());function kc(t){return t&&t.__esModule?t:{default:t}}function Ki(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Lc(t,u,o[u])})}return t}function Lc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var Bc=Ki({},Xi.default,{steps:Xi.default.steps.filter(function(t){return t.formatAs!=="second"}).map(function(t){return t.formatAs==="minute"?Ki({},t,{minTime:Fc.minute}):t})});jr.default=Bc});var $r=T(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.default=void 0;var Dc={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};xr.default=Dc});var ru=T(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.default=void 0;var tu=Ic($r());function Ic(t){return t&&t.__esModule?t:{default:t}}function Wc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Mc(t,u,o[u])})}return t}function Mc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var zc=Wc({},tu.default,{steps:[{formatAs:"now"}].concat(tu.default.steps)});Ur.default=zc});var yo=T(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.default=void 0;var nu=Nc($r());function Nc(t){return t&&t.__esModule?t:{default:t}}function jc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){xc(t,u,o[u])})}return t}function xc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var $c=jc({},nu.default,{steps:nu.default.steps.filter(function(t){return t.formatAs!=="second"})});Vr.default=$c});var au=T(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.default=void 0;var ou=Uc(yo());function Uc(t){return t&&t.__esModule?t:{default:t}}function Vc(t){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{},a=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable}))),a.forEach(function(u){Hc(t,u,o[u])})}return t}function Hc(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var Yc=Vc({},ou.default,{steps:[{formatAs:"now"}].concat(ou.default.steps)});Hr.default=Yc});var uu=T(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.default=id;var Qc=Y(lo()),Gc=Y(fo()),iu=Y(Wi()),Jc=Y(Mi()),Zc=Y(Lt()),Xc=Y(Qi()),Kc=Y(bo()),ed=Y(Zi()),td=Y(eu()),rd=Y($r()),nd=Y(ru()),od=Y(yo()),ad=Y(au());function Y(t){return t&&t.__esModule?t:{default:t}}function id(t){switch(t){case"default":case"round":return Qc.default;case"round-minute":return Gc.default;case"approximate":return iu.default;case"time":case"approximate-time":return Jc.default;case"mini":return rd.default;case"mini-now":return nd.default;case"mini-minute":return od.default;case"mini-minute-now":return ad.default;case"twitter":return Zc.default;case"twitter-now":return Xc.default;case"twitter-minute":return Kc.default;case"twitter-minute-now":return ed.default;case"twitter-first-minute":return td.default;default:return iu.default}}});var So=T(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.isStyleObject=hu;Bt.default=void 0;var _o=qe(yi()),su=qe(_i()),ud=qe(Pr()),sd=qe(Ai()),ld=qe(eo()),fd=qe(Li()),Ee=Di(),lu=qe(fo()),cd=qe(uu()),fu=at();function qe(t){return t&&t.__esModule?t:{default:t}}function ut(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ut=function(o){return typeof o}:ut=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ut(t)}function dd(t,r){return pd(t)||hd(t,r)||md()}function md(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function hd(t,r){var o=[],a=!0,u=!1,l=void 0;try{for(var m=t[Symbol.iterator](),d;!(a=(d=m.next()).done)&&(o.push(d.value),!(r&&o.length===r));a=!0);}catch(p){u=!0,l=p}finally{try{!a&&m.return!=null&&m.return()}finally{if(u)throw l}}return o}function pd(t){if(Array.isArray(t))return t}function bd(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cu(t,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function yd(t,r,o){return r&&cu(t.prototype,r),o&&cu(t,o),t}var fe=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.polyfill;bd(this,t),typeof r=="string"&&(r=[r]),this.locale=(0,ud.default)(r.concat(t.getDefaultLocale()),Ee.getLocaleData),typeof Intl<"u"&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),a===!1?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=_o.default,this.IntlPluralRules=_o.default.PluralRules),this.relativeTimeFormatCache=new su.default,this.pluralRulesCache=new su.default}return yd(t,[{key:"format",value:function(o,a,u){u||(a&&!Td(a)?(u=a,a=void 0):u={}),a||(a=lu.default),typeof a=="string"&&(a=(0,cd.default)(a));var l=gd(o),m=this.getLabels(a.flavour||a.labels),d=m.labels,p=m.labelsType,_;a.now!==void 0&&(_=a.now),_===void 0&&u.now!==void 0&&(_=u.now),_===void 0&&(_=Date.now());var P=(_-l)/1e3,R=u.future||P<0,S=wd(d,(0,Ee.getLocaleData)(this.locale).now,(0,Ee.getLocaleData)(this.locale).long,R);if(a.custom){var b=a.custom({now:_,date:new Date(l),time:l,elapsed:P,locale:this.locale});if(b!==void 0)return b}var A=Sd(a.units,d,S),C=u.round||a.round,z=(0,sd.default)(a.gradation||a.steps||lu.default.steps,P,{now:_,units:A,round:C,future:R,getNextStep:!0}),W=dd(z,3),U=W[0],Z=W[1],V=W[2],X=this.formatDateForStep(l,Z,P,{labels:d,labelsType:p,nowLabel:S,now:_,future:R,round:C})||"";if(u.getTimeToNextUpdate){var de=(0,fd.default)(l,Z,{nextStep:V,prevStep:U,now:_,future:R,round:C});return[X,de]}return X}},{key:"formatDateForStep",value:function(o,a,u,l){var m=this,d=l.labels,p=l.labelsType,_=l.nowLabel,P=l.now,R=l.future,S=l.round;if(!!a){if(a.format)return a.format(o,this.locale,{formatAs:function(W,U){return m.formatValue(U,W,{labels:d,future:R})},now:P,future:R});var b=a.unit||a.formatAs;if(!b)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(a)));if(b==="now")return _;var A=Math.abs(u)/(0,ld.default)(a);a.granularity&&(A=(0,fu.getRoundFunction)(S)(A/a.granularity)*a.granularity);var C=-1*Math.sign(u)*(0,fu.getRoundFunction)(S)(A);switch(C===0&&(R?C=0:C=-0),p){case"long":case"short":case"narrow":return this.getFormatter(p).format(C,b);default:return this.formatValue(C,b,{labels:d,future:R})}}}},{key:"formatValue",value:function(o,a,u){var l=u.labels,m=u.future;return this.getFormattingRule(l,a,o,{future:m}).replace("{0}",this.formatNumber(Math.abs(o)))}},{key:"getFormattingRule",value:function(o,a,u,l){var m=l.future,d=this.locale;if(o=o[a],typeof o=="string")return o;var p=u===0?m?"future":"past":u<0?"past":"future",_=o[p]||o;if(typeof _=="string")return _;var P=this.getPluralRules().select(Math.abs(u));return _[P]||_.other}},{key:"formatNumber",value:function(o){return this.numberFormat?this.numberFormat.format(o):String(o)}},{key:"getFormatter",value:function(o){return this.relativeTimeFormatCache.get(this.locale,o)||this.relativeTimeFormatCache.put(this.locale,o,new this.IntlRelativeTimeFormat(this.locale,{style:o}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];typeof o=="string"&&(o=[o]),o=o.map(function(_){switch(_){case"tiny":case"mini-time":return"mini";default:return _}}),o=o.concat("long");for(var a=(0,Ee.getLocaleData)(this.locale),m=o,u=Array.isArray(m),l=0,m=u?m:m[Symbol.iterator]();;){var d;if(u){if(l>=m.length)break;d=m[l++]}else{if(l=m.next(),l.done)break;d=l.value}var p=d;if(a[p])return{labelsType:p,labels:a[p]}}}}]),t}();Bt.default=fe;var mu="en";fe.getDefaultLocale=function(){return mu};fe.setDefaultLocale=function(t){return mu=t};fe.addDefaultLocale=function(t){if(du)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");du=!0,fe.setDefaultLocale(t.locale),fe.addLocale(t)};var du;fe.addLocale=function(t){(0,Ee.addLocaleData)(t),_o.default.addLocale(t)};fe.locale=fe.addLocale;fe.addLabels=function(t,r,o){var a=(0,Ee.getLocaleData)(t);a||((0,Ee.addLocaleData)({locale:t}),a=(0,Ee.getLocaleData)(t)),a[r]=o};function gd(t){if(t.constructor===Date||_d(t))return t.getTime();if(typeof t=="number")return t;throw new Error("Unsupported relative time formatter input: ".concat(ut(t),", ").concat(t))}function _d(t){return ut(t)==="object"&&typeof t.getTime=="function"}function Sd(t,r,o){var a=Object.keys(r);return o&&a.push("now"),t&&(a=t.filter(function(u){return u==="now"||a.indexOf(u)>=0})),a}function wd(t,r,o,a){var u=t.now||r&&r.now;if(u)return typeof u=="string"?u:a?u.future:u.past;if(o&&o.second&&o.second.current)return o.second.current}var vd={}.constructor;function Rd(t){return ut(t)!==void 0&&t!==null&&t.constructor===vd}function Td(t){return typeof t=="string"||hu(t)}function hu(t){return Rd(t)&&(Array.isArray(t.steps)||Array.isArray(t.gradation)||Array.isArray(t.flavour)||typeof t.flavour=="string"||Array.isArray(t.labels)||typeof t.labels=="string"||Array.isArray(t.units)||typeof t.custom=="function")}});var yu=T((Dt,bu)=>{"use strict";Dt=bu.exports=So().default;Dt.default=So().default;var pu=Pr();Dt.intlDateTimeFormatSupported=pu.intlDateTimeFormatSupported;Dt.intlDateTimeFormatSupportedLocale=pu.intlDateTimeFormatSupportedLocale});var Eu=T((jm,Ou)=>{"use strict";function Id(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=t.substring(5,r).split(";"),a="",u=!1,l=o[0]||"text/plain",m=l;for(let P=1;P<o.length;P++)o[P]==="base64"?u=!0:(m+=`;${o[P]}`,o[P].indexOf("charset=")===0&&(a=o[P].substring(8)));!o[0]&&!a.length&&(m+=";charset=US-ASCII",a="US-ASCII");let d=u?"base64":"ascii",p=unescape(t.substring(r+1)),_=Buffer.from(p,d);return _.type=l,_.typeFull=m,_.charset=a,_}Ou.exports=Id});var Fu=T((Gr,qu)=>{(function(t,r){typeof Gr=="object"&&typeof qu<"u"?r(Gr):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(Gr,function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let u=a();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let m=o,d=Promise,p=Promise.prototype.then,_=Promise.resolve.bind(d),P=Promise.reject.bind(d);function R(e){return new d(e)}function S(e){return _(e)}function b(e){return P(e)}function A(e,n,i){return p.call(e,n,i)}function C(e,n,i){A(A(e,n,i),void 0,m)}function z(e,n){C(e,n)}function W(e,n){C(e,void 0,n)}function U(e,n,i){return A(e,n,i)}function Z(e){A(e,void 0,m)}let V=(()=>{let e=u&&u.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return i=>A(n,i)})();function X(e,n,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,i)}function de(e,n,i){try{return S(X(e,n,i))}catch(s){return b(s)}}let ko=16384;class te{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let i=this._back,s=i;i._elements.length===ko-1&&(s={_elements:[],_next:void 0}),i._elements.push(n),s!==i&&(this._back=s,i._next=s),++this._size}shift(){let n=this._front,i=n,s=this._cursor,f=s+1,h=n._elements,y=h[s];return f===ko&&(i=n._next,f=0),--this._size,this._cursor=f,n!==i&&(this._front=i),h[s]=void 0,y}forEach(n){let i=this._cursor,s=this._front,f=s._elements;for(;(i!==f.length||s._next!==void 0)&&!(i===f.length&&(s=s._next,f=s._elements,i=0,f.length===0));)n(f[i]),++i}peek(){let n=this._front,i=this._cursor;return n._elements[i]}}function Lo(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?fn(e):n._state==="closed"?as(e):Bo(e,n._storedError)}function ln(e,n){let i=e._ownerReadableStream;return oe(i,n)}function me(e){e._ownerReadableStream._state==="readable"?cn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):is(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Qe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function fn(e){e._closedPromise=R((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i})}function Bo(e,n){fn(e),cn(e,n)}function as(e){fn(e),Do(e)}function cn(e,n){e._closedPromise_reject!==void 0&&(Z(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function is(e,n){Bo(e,n)}function Do(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Io=r("[[AbortSteps]]"),Wo=r("[[ErrorSteps]]"),dn=r("[[CancelSteps]]"),mn=r("[[PullSteps]]"),Mo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},us=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function ss(e){return typeof e=="object"||typeof e=="function"}function he(e,n){if(e!==void 0&&!ss(e))throw new TypeError(`${n} is not an object.`)}function re(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function ls(e){return typeof e=="object"&&e!==null||typeof e=="function"}function zo(e,n){if(!ls(e))throw new TypeError(`${n} is not an object.`)}function pe(e,n,i){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${i}'.`)}function hn(e,n,i){if(e===void 0)throw new TypeError(`${n} is required in '${i}'.`)}function pn(e){return Number(e)}function No(e){return e===0?0:e}function fs(e){return No(us(e))}function jo(e,n){let s=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=No(f),!Mo(f))throw new TypeError(`${n} is not a finite number`);if(f=fs(f),f<0||f>s)throw new TypeError(`${n} is outside the accepted range of ${0} to ${s}, inclusive`);return!Mo(f)||f===0?0:f}function bn(e,n){if(!Te(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Ge(e){return new mt(e)}function xo(e,n){e._reader._readRequests.push(n)}function yn(e,n,i){let f=e._reader._readRequests.shift();i?f._closeSteps():f._chunkSteps(n)}function zt(e){return e._reader._readRequests.length}function $o(e){let n=e._reader;return!(n===void 0||!Se(n))}class mt{constructor(n){if(pe(n,1,"ReadableStreamDefaultReader"),bn(n,"First parameter"),Pe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Lo(this,n),this._readRequests=new te}get closed(){return Se(this)?this._closedPromise:b(Nt("closed"))}cancel(n=void 0){return Se(this)?this._ownerReadableStream===void 0?b(Qe("cancel")):ln(this,n):b(Nt("cancel"))}read(){if(!Se(this))return b(Nt("read"));if(this._ownerReadableStream===void 0)return b(Qe("read from"));let n,i,s=R((h,y)=>{n=h,i=y});return ht(this,{_chunkSteps:h=>n({value:h,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:h=>i(h)}),s}releaseLock(){if(!Se(this))throw Nt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mt.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Se(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof mt}function ht(e,n){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?n._closeSteps():i._state==="errored"?n._errorSteps(i._storedError):i._readableStreamController[mn](n)}function Nt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Uo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Vo{constructor(n,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=i}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?U(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let i=()=>this._returnSteps(n);return this._ongoingPromise?U(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return b(Qe("iterate"));let i,s,f=R((y,g)=>{i=y,s=g});return ht(n,{_chunkSteps:y=>{this._ongoingPromise=void 0,V(()=>i({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,me(n),i({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,me(n),s(y)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return b(Qe("finish iterating"));if(!this._preventCancel){let s=ln(i,n);return me(i),U(s,()=>({value:n,done:!0}))}return me(i),S({value:n,done:!0})}}let Ho={next(){return Yo(this)?this._asyncIteratorImpl.next():b(Qo("next"))},return(e){return Yo(this)?this._asyncIteratorImpl.return(e):b(Qo("return"))}};Uo!==void 0&&Object.setPrototypeOf(Ho,Uo);function cs(e,n){let i=Ge(e),s=new Vo(i,n),f=Object.create(Ho);return f._asyncIteratorImpl=s,f}function Yo(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Vo}catch{return!1}}function Qo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Go=Number.isNaN||function(e){return e!==e};function pt(e){return e.slice()}function Jo(e,n,i,s,f){new Uint8Array(e).set(new Uint8Array(i,s,f),n)}function Yd(e){return e}function jt(e){return!1}function Zo(e,n,i){if(e.slice)return e.slice(n,i);let s=i-n,f=new ArrayBuffer(s);return Jo(f,0,e,n,s),f}function ds(e){return!(typeof e!="number"||Go(e)||e<0)}function Xo(e){let n=Zo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function gn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function _n(e,n,i){if(!ds(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:i}),e._queueTotalSize+=i}function ms(e){return e._queue.peek().value}function we(e){e._queue=new te,e._queueTotalSize=0}class bt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Sn(this))throw Pn("view");return this._view}respond(n){if(!Sn(this))throw Pn("respond");if(pe(n,1,"respond"),n=jo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");jt(this._view.buffer),Vt(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Sn(this))throw Pn("respondWithNewView");if(pe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");jt(n.buffer),Ht(this._associatedReadableByteStreamController,n)}}Object.defineProperties(bt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(bt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Je{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ie(this))throw gt("byobRequest");return Tn(this)}get desiredSize(){if(!Ie(this))throw gt("desiredSize");return ia(this)}close(){if(!Ie(this))throw gt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);yt(this)}enqueue(n){if(!Ie(this))throw gt("enqueue");if(pe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);Ut(this,n)}error(n=void 0){if(!Ie(this))throw gt("error");ne(this,n)}[dn](n){Ko(this),we(this);let i=this._cancelAlgorithm(n);return $t(this),i}[mn](n){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,na(this);let h=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(h);return}let s=this._autoAllocateChunkSize;if(s!==void 0){let f;try{f=new ArrayBuffer(s)}catch(y){n._errorSteps(y);return}let h={buffer:f,bufferByteLength:s,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}xo(i,n),We(this)}}Object.defineProperties(Je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ie(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Je}function Sn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof bt}function We(e){if(!ys(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,We(e))},s=>{ne(e,s)})}function Ko(e){vn(e),e._pendingPullIntos=new te}function wn(e,n){let i=!1;e._state==="closed"&&(i=!0);let s=ea(n);n.readerType==="default"?yn(e,s,i):Ss(e,s,i)}function ea(e){let n=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/i)}function xt(e,n,i,s){e._queue.push({buffer:n,byteOffset:i,byteLength:s}),e._queueTotalSize+=s}function ta(e,n){let i=n.elementSize,s=n.bytesFilled-n.bytesFilled%i,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),h=n.bytesFilled+f,y=h-h%i,g=f,w=!1;y>s&&(g=y-n.bytesFilled,w=!0);let O=e._queue;for(;g>0;){let k=O.peek(),q=Math.min(g,k.byteLength),B=n.byteOffset+n.bytesFilled;Jo(n.buffer,B,k.buffer,k.byteOffset,q),k.byteLength===q?O.shift():(k.byteOffset+=q,k.byteLength-=q),e._queueTotalSize-=q,ra(e,q,n),g-=q}return w}function ra(e,n,i){i.bytesFilled+=n}function na(e){e._queueTotalSize===0&&e._closeRequested?($t(e),Ct(e._controlledReadableByteStream)):We(e)}function vn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function oa(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();ta(e,n)&&(Rn(e),wn(e._controlledReadableByteStream,n))}}function hs(e,n,i){let s=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let h=n.constructor,y=n.buffer,g={buffer:y,bufferByteLength:y.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(g),la(s,i);return}if(s._state==="closed"){let w=new h(g.buffer,g.byteOffset,0);i._closeSteps(w);return}if(e._queueTotalSize>0){if(ta(e,g)){let w=ea(g);na(e),i._chunkSteps(w);return}if(e._closeRequested){let w=new TypeError("Insufficient bytes to fill elements in the given buffer");ne(e,w),i._errorSteps(w);return}}e._pendingPullIntos.push(g),la(s,i),We(e)}function ps(e,n){let i=e._controlledReadableByteStream;if(Cn(i))for(;fa(i)>0;){let s=Rn(e);wn(i,s)}}function bs(e,n,i){if(ra(e,n,i),i.bytesFilled<i.elementSize)return;Rn(e);let s=i.bytesFilled%i.elementSize;if(s>0){let f=i.byteOffset+i.bytesFilled,h=Zo(i.buffer,f-s,f);xt(e,h,0,h.byteLength)}i.bytesFilled-=s,wn(e._controlledReadableByteStream,i),oa(e)}function aa(e,n){let i=e._pendingPullIntos.peek();vn(e),e._controlledReadableByteStream._state==="closed"?ps(e):bs(e,n,i),We(e)}function Rn(e){return e._pendingPullIntos.shift()}function ys(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!($o(n)&&zt(n)>0||Cn(n)&&fa(n)>0||ia(e)>0)}function $t(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function yt(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let s=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ne(e,s),s}$t(e),Ct(n)}}function Ut(e,n){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let s=n.buffer,f=n.byteOffset,h=n.byteLength,y=s;if(e._pendingPullIntos.length>0){let g=e._pendingPullIntos.peek();jt(g.buffer),g.buffer=g.buffer}if(vn(e),$o(i))if(zt(i)===0)xt(e,y,f,h);else{let g=new Uint8Array(y,f,h);yn(i,g,!1)}else Cn(i)?(xt(e,y,f,h),oa(e)):xt(e,y,f,h);We(e)}function ne(e,n){let i=e._controlledReadableByteStream;i._state==="readable"&&(Ko(e),we(e),$t(e),Ba(i,n))}function Tn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),i=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),s=Object.create(bt.prototype);_s(s,e,i),e._byobRequest=s}return e._byobRequest}function ia(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Vt(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+n>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,aa(e,n)}function Ht(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+n.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");i.buffer=n.buffer,aa(e,n.byteLength)}function ua(e,n,i,s,f,h,y){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,we(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=h,n._pullAlgorithm=s,n._cancelAlgorithm=f,n._autoAllocateChunkSize=y,n._pendingPullIntos=new te,e._readableStreamController=n;let g=i();C(S(g),()=>{n._started=!0,We(n)},w=>{ne(n,w)})}function gs(e,n,i){let s=Object.create(Je.prototype),f=()=>{},h=()=>S(void 0),y=()=>S(void 0);n.start!==void 0&&(f=()=>n.start(s)),n.pull!==void 0&&(h=()=>n.pull(s)),n.cancel!==void 0&&(y=w=>n.cancel(w));let g=n.autoAllocateChunkSize;if(g===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ua(e,s,f,h,y,i,g)}function _s(e,n,i){e._associatedReadableByteStreamController=n,e._view=i}function Pn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function gt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function sa(e){return new _t(e)}function la(e,n){e._reader._readIntoRequests.push(n)}function Ss(e,n,i){let f=e._reader._readIntoRequests.shift();i?f._closeSteps(n):f._chunkSteps(n)}function fa(e){return e._reader._readIntoRequests.length}function Cn(e){let n=e._reader;return!(n===void 0||!Me(n))}class _t{constructor(n){if(pe(n,1,"ReadableStreamBYOBReader"),bn(n,"First parameter"),Pe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ie(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Lo(this,n),this._readIntoRequests=new te}get closed(){return Me(this)?this._closedPromise:b(Yt("closed"))}cancel(n=void 0){return Me(this)?this._ownerReadableStream===void 0?b(Qe("cancel")):ln(this,n):b(Yt("cancel"))}read(n){if(!Me(this))return b(Yt("read"));if(!ArrayBuffer.isView(n))return b(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return b(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return b(new TypeError("view's buffer must have non-zero byteLength"));if(jt(n.buffer),this._ownerReadableStream===void 0)return b(Qe("read from"));let i,s,f=R((y,g)=>{i=y,s=g});return ca(this,n,{_chunkSteps:y=>i({value:y,done:!1}),_closeSteps:y=>i({value:y,done:!0}),_errorSteps:y=>s(y)}),f}releaseLock(){if(!Me(this))throw Yt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(_t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Me(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof _t}function ca(e,n,i){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="errored"?i._errorSteps(s._storedError):hs(s._readableStreamController,n,i)}function Yt(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function St(e,n){let{highWaterMark:i}=e;if(i===void 0)return n;if(Go(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function Qt(e){let{size:n}=e;return n||(()=>1)}function Gt(e,n){he(e,n);let i=e==null?void 0:e.highWaterMark,s=e==null?void 0:e.size;return{highWaterMark:i===void 0?void 0:pn(i),size:s===void 0?void 0:ws(s,`${n} has member 'size' that`)}}function ws(e,n){return re(e,n),i=>pn(e(i))}function vs(e,n){he(e,n);let i=e==null?void 0:e.abort,s=e==null?void 0:e.close,f=e==null?void 0:e.start,h=e==null?void 0:e.type,y=e==null?void 0:e.write;return{abort:i===void 0?void 0:Rs(i,e,`${n} has member 'abort' that`),close:s===void 0?void 0:Ts(s,e,`${n} has member 'close' that`),start:f===void 0?void 0:Ps(f,e,`${n} has member 'start' that`),write:y===void 0?void 0:Cs(y,e,`${n} has member 'write' that`),type:h}}function Rs(e,n,i){return re(e,i),s=>de(e,n,[s])}function Ts(e,n,i){return re(e,i),()=>de(e,n,[])}function Ps(e,n,i){return re(e,i),s=>X(e,n,[s])}function Cs(e,n,i){return re(e,i),(s,f)=>de(e,n,[s,f])}function da(e,n){if(!Ze(e))throw new TypeError(`${n} is not a WritableStream.`)}function As(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Os=typeof AbortController=="function";function Es(){if(Os)return new AbortController}class wt{constructor(n={},i={}){n===void 0?n=null:zo(n,"First parameter");let s=Gt(i,"Second parameter"),f=vs(n,"First parameter");if(ha(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let y=Qt(s),g=St(s,1);$s(this,f,g,y)}get locked(){if(!Ze(this))throw er("locked");return Xe(this)}abort(n=void 0){return Ze(this)?Xe(this)?b(new TypeError("Cannot abort a stream that already has a writer")):Jt(this,n):b(er("abort"))}close(){return Ze(this)?Xe(this)?b(new TypeError("Cannot close a stream that already has a writer")):ue(this)?b(new TypeError("Cannot close an already-closing stream")):pa(this):b(er("close"))}getWriter(){if(!Ze(this))throw er("getWriter");return ma(this)}}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function ma(e){return new vt(e)}function qs(e,n,i,s,f=1,h=()=>1){let y=Object.create(wt.prototype);ha(y);let g=Object.create(Ke.prototype);return wa(y,g,e,n,i,s,f,h),y}function ha(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new te,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ze(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof wt}function Xe(e){return e._writer!==void 0}function Jt(e,n){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let s=e._state;if(s==="closed"||s==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;s==="erroring"&&(f=!0,n=void 0);let h=R((y,g)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:g,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=h,f||On(e,n),h}function pa(e){let n=e._state;if(n==="closed"||n==="errored")return b(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let i=R((f,h)=>{let y={_resolve:f,_reject:h};e._closeRequest=y}),s=e._writer;return s!==void 0&&e._backpressure&&n==="writable"&&Wn(s),Us(e._writableStreamController),i}function Fs(e){return R((i,s)=>{let f={_resolve:i,_reject:s};e._writeRequests.push(f)})}function An(e,n){if(e._state==="writable"){On(e,n);return}En(e)}function On(e,n){let i=e._writableStreamController;e._state="erroring",e._storedError=n;let s=e._writer;s!==void 0&&ya(s,n),!Is(e)&&i._started&&En(e)}function En(e){e._state="errored",e._writableStreamController[Wo]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new te,e._pendingAbortRequest===void 0){Zt(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(n),Zt(e);return}let s=e._writableStreamController[Io](i._reason);C(s,()=>{i._resolve(),Zt(e)},f=>{i._reject(f),Zt(e)})}function ks(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Ls(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,An(e,n)}function Bs(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&Pa(i)}function Ds(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),An(e,n)}function ue(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Is(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ws(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ms(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Zt(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Dn(n,e._storedError)}function qn(e,n){let i=e._writer;i!==void 0&&n!==e._backpressure&&(n?Zs(i):Wn(i)),e._backpressure=n}class vt{constructor(n){if(pe(n,1,"WritableStreamDefaultWriter"),da(n,"First parameter"),Xe(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let i=n._state;if(i==="writable")!ue(n)&&n._backpressure?rr(this):Ca(this),tr(this);else if(i==="erroring")In(this,n._storedError),tr(this);else if(i==="closed")Ca(this),Gs(this);else{let s=n._storedError;In(this,s),Ta(this,s)}}get closed(){return ze(this)?this._closedPromise:b(Ne("closed"))}get desiredSize(){if(!ze(this))throw Ne("desiredSize");if(this._ownerWritableStream===void 0)throw Rt("desiredSize");return xs(this)}get ready(){return ze(this)?this._readyPromise:b(Ne("ready"))}abort(n=void 0){return ze(this)?this._ownerWritableStream===void 0?b(Rt("abort")):zs(this,n):b(Ne("abort"))}close(){if(!ze(this))return b(Ne("close"));let n=this._ownerWritableStream;return n===void 0?b(Rt("close")):ue(n)?b(new TypeError("Cannot close an already-closing stream")):ba(this)}releaseLock(){if(!ze(this))throw Ne("releaseLock");this._ownerWritableStream!==void 0&&ga(this)}write(n=void 0){return ze(this)?this._ownerWritableStream===void 0?b(Rt("write to")):_a(this,n):b(Ne("write"))}}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function ze(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof vt}function zs(e,n){let i=e._ownerWritableStream;return Jt(i,n)}function ba(e){let n=e._ownerWritableStream;return pa(n)}function Ns(e){let n=e._ownerWritableStream,i=n._state;return ue(n)||i==="closed"?S(void 0):i==="errored"?b(n._storedError):ba(e)}function js(e,n){e._closedPromiseState==="pending"?Dn(e,n):Js(e,n)}function ya(e,n){e._readyPromiseState==="pending"?Aa(e,n):Xs(e,n)}function xs(e){let n=e._ownerWritableStream,i=n._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:va(n._writableStreamController)}function ga(e){let n=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ya(e,i),js(e,i),n._writer=void 0,e._ownerWritableStream=void 0}function _a(e,n){let i=e._ownerWritableStream,s=i._writableStreamController,f=Vs(s,n);if(i!==e._ownerWritableStream)return b(Rt("write to"));let h=i._state;if(h==="errored")return b(i._storedError);if(ue(i)||h==="closed")return b(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return b(i._storedError);let y=Fs(i);return Hs(s,n,f),y}let Sa={};class Ke{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Fn(this))throw Bn("abortReason");return this._abortReason}get signal(){if(!Fn(this))throw Bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Fn(this))throw Bn("error");this._controlledWritableStream._state==="writable"&&Ra(this,n)}[Io](n){let i=this._abortAlgorithm(n);return Xt(this),i}[Wo](){we(this)}}Object.defineProperties(Ke.prototype,{error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Fn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ke}function wa(e,n,i,s,f,h,y,g){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,we(n),n._abortReason=void 0,n._abortController=Es(),n._started=!1,n._strategySizeAlgorithm=g,n._strategyHWM=y,n._writeAlgorithm=s,n._closeAlgorithm=f,n._abortAlgorithm=h;let w=Ln(n);qn(e,w);let O=i(),k=S(O);C(k,()=>{n._started=!0,Kt(n)},q=>{n._started=!0,An(e,q)})}function $s(e,n,i,s){let f=Object.create(Ke.prototype),h=()=>{},y=()=>S(void 0),g=()=>S(void 0),w=()=>S(void 0);n.start!==void 0&&(h=()=>n.start(f)),n.write!==void 0&&(y=O=>n.write(O,f)),n.close!==void 0&&(g=()=>n.close()),n.abort!==void 0&&(w=O=>n.abort(O)),wa(e,f,h,y,g,w,i,s)}function Xt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Us(e){_n(e,Sa,0),Kt(e)}function Vs(e,n){try{return e._strategySizeAlgorithm(n)}catch(i){return kn(e,i),1}}function va(e){return e._strategyHWM-e._queueTotalSize}function Hs(e,n,i){try{_n(e,n,i)}catch(f){kn(e,f);return}let s=e._controlledWritableStream;if(!ue(s)&&s._state==="writable"){let f=Ln(e);qn(s,f)}Kt(e)}function Kt(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){En(n);return}if(e._queue.length===0)return;let s=ms(e);s===Sa?Ys(e):Qs(e,s)}function kn(e,n){e._controlledWritableStream._state==="writable"&&Ra(e,n)}function Ys(e){let n=e._controlledWritableStream;Ws(n),gn(e);let i=e._closeAlgorithm();Xt(e),C(i,()=>{Bs(n)},s=>{Ds(n,s)})}function Qs(e,n){let i=e._controlledWritableStream;Ms(i);let s=e._writeAlgorithm(n);C(s,()=>{ks(i);let f=i._state;if(gn(e),!ue(i)&&f==="writable"){let h=Ln(e);qn(i,h)}Kt(e)},f=>{i._state==="writable"&&Xt(e),Ls(i,f)})}function Ln(e){return va(e)<=0}function Ra(e,n){let i=e._controlledWritableStream;Xt(e),On(i,n)}function er(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Ne(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Rt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function tr(e){e._closedPromise=R((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function Ta(e,n){tr(e),Dn(e,n)}function Gs(e){tr(e),Pa(e)}function Dn(e,n){e._closedPromise_reject!==void 0&&(Z(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Js(e,n){Ta(e,n)}function Pa(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function rr(e){e._readyPromise=R((n,i)=>{e._readyPromise_resolve=n,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function In(e,n){rr(e),Aa(e,n)}function Ca(e){rr(e),Wn(e)}function Aa(e,n){e._readyPromise_reject!==void 0&&(Z(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Zs(e){rr(e)}function Xs(e,n){In(e,n)}function Wn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Oa=typeof DOMException<"u"?DOMException:void 0;function Ks(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function el(){let e=function(i,s){this.message=i||"",this.name=s||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let tl=Ks(Oa)?Oa:el();function Ea(e,n,i,s,f,h){let y=Ge(e),g=ma(n);e._disturbed=!0;let w=!1,O=S(void 0);return R((k,q)=>{let B;if(h!==void 0){if(B=()=>{let v=new tl("Aborted","AbortError"),E=[];s||E.push(()=>n._state==="writable"?Jt(n,v):S(void 0)),f||E.push(()=>e._state==="readable"?oe(e,v):S(void 0)),x(()=>Promise.all(E.map(I=>I())),!0,v)},h.aborted){B();return}h.addEventListener("abort",B)}function Ce(){return R((v,E)=>{function I(ae){ae?v():A(Ot(),I,E)}I(!1)})}function Ot(){return w?S(!0):A(g._readyPromise,()=>R((v,E)=>{ht(y,{_chunkSteps:I=>{O=A(_a(g,I),void 0,o),v(!1)},_closeSteps:()=>v(!0),_errorSteps:E})}))}if(j(e,y._closedPromise,v=>{s?F(!0,v):x(()=>Jt(n,v),!0,v)}),j(n,g._closedPromise,v=>{f?F(!0,v):x(()=>oe(e,v),!0,v)}),se(e,y._closedPromise,()=>{i?F():x(()=>Ns(g))}),ue(n)||n._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");f?F(!0,v):x(()=>oe(e,v),!0,v)}Z(Ce());function Ae(){let v=O;return A(O,()=>v!==O?Ae():void 0)}function j(v,E,I){v._state==="errored"?I(v._storedError):W(E,I)}function se(v,E,I){v._state==="closed"?I():z(E,I)}function x(v,E,I){if(w)return;w=!0,n._state==="writable"&&!ue(n)?z(Ae(),ae):ae();function ae(){C(v(),()=>L(E,I),Oe=>L(!0,Oe))}}function F(v,E){w||(w=!0,n._state==="writable"&&!ue(n)?z(Ae(),()=>L(v,E)):L(v,E))}function L(v,E){ga(g),me(y),h!==void 0&&h.removeEventListener("abort",B),v?q(E):k(void 0)}})}class et{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!nr(this))throw ir("desiredSize");return Mn(this)}close(){if(!nr(this))throw ir("close");if(!tt(this))throw new TypeError("The stream is not in a state that permits close");Pt(this)}enqueue(n=void 0){if(!nr(this))throw ir("enqueue");if(!tt(this))throw new TypeError("The stream is not in a state that permits enqueue");return ar(this,n)}error(n=void 0){if(!nr(this))throw ir("error");ve(this,n)}[dn](n){we(this);let i=this._cancelAlgorithm(n);return or(this),i}[mn](n){let i=this._controlledReadableStream;if(this._queue.length>0){let s=gn(this);this._closeRequested&&this._queue.length===0?(or(this),Ct(i)):Tt(this),n._chunkSteps(s)}else xo(i,n),Tt(this)}}Object.defineProperties(et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(et.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function nr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof et}function Tt(e){if(!qa(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Tt(e))},s=>{ve(e,s)})}function qa(e){let n=e._controlledReadableStream;return!tt(e)||!e._started?!1:!!(Pe(n)&&zt(n)>0||Mn(e)>0)}function or(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Pt(e){if(!tt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(or(e),Ct(n))}function ar(e,n){if(!tt(e))return;let i=e._controlledReadableStream;if(Pe(i)&&zt(i)>0)yn(i,n,!1);else{let s;try{s=e._strategySizeAlgorithm(n)}catch(f){throw ve(e,f),f}try{_n(e,n,s)}catch(f){throw ve(e,f),f}}Tt(e)}function ve(e,n){let i=e._controlledReadableStream;i._state==="readable"&&(we(e),or(e),Ba(i,n))}function Mn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function rl(e){return!qa(e)}function tt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Fa(e,n,i,s,f,h,y){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,we(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=y,n._strategyHWM=h,n._pullAlgorithm=s,n._cancelAlgorithm=f,e._readableStreamController=n;let g=i();C(S(g),()=>{n._started=!0,Tt(n)},w=>{ve(n,w)})}function nl(e,n,i,s){let f=Object.create(et.prototype),h=()=>{},y=()=>S(void 0),g=()=>S(void 0);n.start!==void 0&&(h=()=>n.start(f)),n.pull!==void 0&&(y=()=>n.pull(f)),n.cancel!==void 0&&(g=w=>n.cancel(w)),Fa(e,f,h,y,g,i,s)}function ir(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ol(e,n){return Ie(e._readableStreamController)?il(e):al(e)}function al(e,n){let i=Ge(e),s=!1,f=!1,h=!1,y,g,w,O,k,q=R(j=>{k=j});function B(){return s||(s=!0,ht(i,{_chunkSteps:se=>{V(()=>{s=!1;let x=se,F=se;f||ar(w._readableStreamController,x),h||ar(O._readableStreamController,F)})},_closeSteps:()=>{s=!1,f||Pt(w._readableStreamController),h||Pt(O._readableStreamController),(!f||!h)&&k(void 0)},_errorSteps:()=>{s=!1}})),S(void 0)}function Ce(j){if(f=!0,y=j,h){let se=pt([y,g]),x=oe(e,se);k(x)}return q}function Ot(j){if(h=!0,g=j,f){let se=pt([y,g]),x=oe(e,se);k(x)}return q}function Ae(){}return w=zn(Ae,B,Ce),O=zn(Ae,B,Ot),W(i._closedPromise,j=>{ve(w._readableStreamController,j),ve(O._readableStreamController,j),(!f||!h)&&k(void 0)}),[w,O]}function il(e){let n=Ge(e),i=!1,s=!1,f=!1,h,y,g,w,O,k=R(F=>{O=F});function q(F){W(F._closedPromise,L=>{F===n&&(ne(g._readableStreamController,L),ne(w._readableStreamController,L),(!s||!f)&&O(void 0))})}function B(){Me(n)&&(me(n),n=Ge(e),q(n)),ht(n,{_chunkSteps:L=>{V(()=>{i=!1;let v=L,E=L;if(!s&&!f)try{E=Xo(L)}catch(I){ne(g._readableStreamController,I),ne(w._readableStreamController,I),O(oe(e,I));return}s||Ut(g._readableStreamController,v),f||Ut(w._readableStreamController,E)})},_closeSteps:()=>{i=!1,s||yt(g._readableStreamController),f||yt(w._readableStreamController),g._readableStreamController._pendingPullIntos.length>0&&Vt(g._readableStreamController,0),w._readableStreamController._pendingPullIntos.length>0&&Vt(w._readableStreamController,0),(!s||!f)&&O(void 0)},_errorSteps:()=>{i=!1}})}function Ce(F,L){Se(n)&&(me(n),n=sa(e),q(n));let v=L?w:g,E=L?g:w;ca(n,F,{_chunkSteps:ae=>{V(()=>{i=!1;let Oe=L?f:s;if(L?s:f)Oe||Ht(v._readableStreamController,ae);else{let Ya;try{Ya=Xo(ae)}catch(jn){ne(v._readableStreamController,jn),ne(E._readableStreamController,jn),O(oe(e,jn));return}Oe||Ht(v._readableStreamController,ae),Ut(E._readableStreamController,Ya)}})},_closeSteps:ae=>{i=!1;let Oe=L?f:s,pr=L?s:f;Oe||yt(v._readableStreamController),pr||yt(E._readableStreamController),ae!==void 0&&(Oe||Ht(v._readableStreamController,ae),!pr&&E._readableStreamController._pendingPullIntos.length>0&&Vt(E._readableStreamController,0)),(!Oe||!pr)&&O(void 0)},_errorSteps:()=>{i=!1}})}function Ot(){if(i)return S(void 0);i=!0;let F=Tn(g._readableStreamController);return F===null?B():Ce(F._view,!1),S(void 0)}function Ae(){if(i)return S(void 0);i=!0;let F=Tn(w._readableStreamController);return F===null?B():Ce(F._view,!0),S(void 0)}function j(F){if(s=!0,h=F,f){let L=pt([h,y]),v=oe(e,L);O(v)}return k}function se(F){if(f=!0,y=F,s){let L=pt([h,y]),v=oe(e,L);O(v)}return k}function x(){}return g=La(x,Ot,j),w=La(x,Ae,se),q(n),[g,w]}function ul(e,n){he(e,n);let i=e,s=i==null?void 0:i.autoAllocateChunkSize,f=i==null?void 0:i.cancel,h=i==null?void 0:i.pull,y=i==null?void 0:i.start,g=i==null?void 0:i.type;return{autoAllocateChunkSize:s===void 0?void 0:jo(s,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:sl(f,i,`${n} has member 'cancel' that`),pull:h===void 0?void 0:ll(h,i,`${n} has member 'pull' that`),start:y===void 0?void 0:fl(y,i,`${n} has member 'start' that`),type:g===void 0?void 0:cl(g,`${n} has member 'type' that`)}}function sl(e,n,i){return re(e,i),s=>de(e,n,[s])}function ll(e,n,i){return re(e,i),s=>de(e,n,[s])}function fl(e,n,i){return re(e,i),s=>X(e,n,[s])}function cl(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function dl(e,n){he(e,n);let i=e==null?void 0:e.mode;return{mode:i===void 0?void 0:ml(i,`${n} has member 'mode' that`)}}function ml(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function hl(e,n){he(e,n);let i=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(i)}}function ka(e,n){he(e,n);let i=e==null?void 0:e.preventAbort,s=e==null?void 0:e.preventCancel,f=e==null?void 0:e.preventClose,h=e==null?void 0:e.signal;return h!==void 0&&pl(h,`${n} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(s),preventClose:Boolean(f),signal:h}}function pl(e,n){if(!As(e))throw new TypeError(`${n} is not an AbortSignal.`)}function bl(e,n){he(e,n);let i=e==null?void 0:e.readable;hn(i,"readable","ReadableWritablePair"),bn(i,`${n} has member 'readable' that`);let s=e==null?void 0:e.writable;return hn(s,"writable","ReadableWritablePair"),da(s,`${n} has member 'writable' that`),{readable:i,writable:s}}class Re{constructor(n={},i={}){n===void 0?n=null:zo(n,"First parameter");let s=Gt(i,"Second parameter"),f=ul(n,"First parameter");if(Nn(this),f.type==="bytes"){if(s.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=St(s,0);gs(this,f,h)}else{let h=Qt(s),y=St(s,1);nl(this,f,y,h)}}get locked(){if(!Te(this))throw je("locked");return Pe(this)}cancel(n=void 0){return Te(this)?Pe(this)?b(new TypeError("Cannot cancel a stream that already has a reader")):oe(this,n):b(je("cancel"))}getReader(n=void 0){if(!Te(this))throw je("getReader");return dl(n,"First parameter").mode===void 0?Ge(this):sa(this)}pipeThrough(n,i={}){if(!Te(this))throw je("pipeThrough");pe(n,1,"pipeThrough");let s=bl(n,"First parameter"),f=ka(i,"Second parameter");if(Pe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Xe(s.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=Ea(this,s.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return Z(h),s.readable}pipeTo(n,i={}){if(!Te(this))return b(je("pipeTo"));if(n===void 0)return b("Parameter 1 is required in 'pipeTo'.");if(!Ze(n))return b(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let s;try{s=ka(i,"Second parameter")}catch(f){return b(f)}return Pe(this)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Xe(n)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ea(this,n,s.preventClose,s.preventAbort,s.preventCancel,s.signal)}tee(){if(!Te(this))throw je("tee");let n=ol(this);return pt(n)}values(n=void 0){if(!Te(this))throw je("values");let i=hl(n,"First parameter");return cs(this,i.preventCancel)}}Object.defineProperties(Re.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Re.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Re.prototype,r.asyncIterator,{value:Re.prototype.values,writable:!0,configurable:!0});function zn(e,n,i,s=1,f=()=>1){let h=Object.create(Re.prototype);Nn(h);let y=Object.create(et.prototype);return Fa(h,y,e,n,i,s,f),h}function La(e,n,i){let s=Object.create(Re.prototype);Nn(s);let f=Object.create(Je.prototype);return ua(s,f,e,n,i,0,void 0),s}function Nn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Te(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Re}function Pe(e){return e._reader!==void 0}function oe(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return b(e._storedError);Ct(e);let i=e._reader;i!==void 0&&Me(i)&&(i._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),i._readIntoRequests=new te);let s=e._readableStreamController[dn](n);return U(s,o)}function Ct(e){e._state="closed";let n=e._reader;n!==void 0&&(Do(n),Se(n)&&(n._readRequests.forEach(i=>{i._closeSteps()}),n._readRequests=new te))}function Ba(e,n){e._state="errored",e._storedError=n;let i=e._reader;i!==void 0&&(cn(i,n),Se(i)?(i._readRequests.forEach(s=>{s._errorSteps(n)}),i._readRequests=new te):(i._readIntoRequests.forEach(s=>{s._errorSteps(n)}),i._readIntoRequests=new te))}function je(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Da(e,n){he(e,n);let i=e==null?void 0:e.highWaterMark;return hn(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:pn(i)}}let Ia=e=>e.byteLength;Object.defineProperty(Ia,"name",{value:"size",configurable:!0});class ur{constructor(n){pe(n,1,"ByteLengthQueuingStrategy"),n=Da(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ma(this))throw Wa("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ma(this))throw Wa("size");return Ia}}Object.defineProperties(ur.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ur.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Wa(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ma(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof ur}let za=()=>1;Object.defineProperty(za,"name",{value:"size",configurable:!0});class sr{constructor(n){pe(n,1,"CountQueuingStrategy"),n=Da(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!ja(this))throw Na("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ja(this))throw Na("size");return za}}Object.defineProperties(sr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(sr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Na(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function ja(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof sr}function yl(e,n){he(e,n);let i=e==null?void 0:e.flush,s=e==null?void 0:e.readableType,f=e==null?void 0:e.start,h=e==null?void 0:e.transform,y=e==null?void 0:e.writableType;return{flush:i===void 0?void 0:gl(i,e,`${n} has member 'flush' that`),readableType:s,start:f===void 0?void 0:_l(f,e,`${n} has member 'start' that`),transform:h===void 0?void 0:Sl(h,e,`${n} has member 'transform' that`),writableType:y}}function gl(e,n,i){return re(e,i),s=>de(e,n,[s])}function _l(e,n,i){return re(e,i),s=>X(e,n,[s])}function Sl(e,n,i){return re(e,i),(s,f)=>de(e,n,[s,f])}class lr{constructor(n={},i={},s={}){n===void 0&&(n=null);let f=Gt(i,"Second parameter"),h=Gt(s,"Third parameter"),y=yl(n,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");let g=St(h,0),w=Qt(h),O=St(f,1),k=Qt(f),q,B=R(Ce=>{q=Ce});wl(this,B,O,k,g,w),Rl(this,y),y.start!==void 0?q(y.start(this._transformStreamController)):q(void 0)}get readable(){if(!xa(this))throw Ha("readable");return this._readable}get writable(){if(!xa(this))throw Ha("writable");return this._writable}}Object.defineProperties(lr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(lr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function wl(e,n,i,s,f,h){function y(){return n}function g(B){return Cl(e,B)}function w(B){return Al(e,B)}function O(){return Ol(e)}e._writable=qs(y,g,O,w,i,s);function k(){return El(e)}function q(B){return cr(e,B),S(void 0)}e._readable=zn(y,k,q,f,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,dr(e,!0),e._transformStreamController=void 0}function xa(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof lr}function fr(e,n){ve(e._readable._readableStreamController,n),cr(e,n)}function cr(e,n){$a(e._transformStreamController),kn(e._writable._writableStreamController,n),e._backpressure&&dr(e,!1)}function dr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=n}class At{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!mr(this))throw hr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Mn(n)}enqueue(n=void 0){if(!mr(this))throw hr("enqueue");Ua(this,n)}error(n=void 0){if(!mr(this))throw hr("error");Tl(this,n)}terminate(){if(!mr(this))throw hr("terminate");Pl(this)}}Object.defineProperties(At.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(At.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function mr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof At}function vl(e,n,i,s){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=i,n._flushAlgorithm=s}function Rl(e,n){let i=Object.create(At.prototype),s=h=>{try{return Ua(i,h),S(void 0)}catch(y){return b(y)}},f=()=>S(void 0);n.transform!==void 0&&(s=h=>n.transform(h,i)),n.flush!==void 0&&(f=()=>n.flush(i)),vl(e,i,s,f)}function $a(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ua(e,n){let i=e._controlledTransformStream,s=i._readable._readableStreamController;if(!tt(s))throw new TypeError("Readable side is not in a state that permits enqueue");try{ar(s,n)}catch(h){throw cr(i,h),i._readable._storedError}rl(s)!==i._backpressure&&dr(i,!0)}function Tl(e,n){fr(e._controlledTransformStream,n)}function Va(e,n){let i=e._transformAlgorithm(n);return U(i,void 0,s=>{throw fr(e._controlledTransformStream,s),s})}function Pl(e){let n=e._controlledTransformStream,i=n._readable._readableStreamController;Pt(i);let s=new TypeError("TransformStream terminated");cr(n,s)}function Cl(e,n){let i=e._transformStreamController;if(e._backpressure){let s=e._backpressureChangePromise;return U(s,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Va(i,n)})}return Va(i,n)}function Al(e,n){return fr(e,n),S(void 0)}function Ol(e){let n=e._readable,i=e._transformStreamController,s=i._flushAlgorithm();return $a(i),U(s,()=>{if(n._state==="errored")throw n._storedError;Pt(n._readableStreamController)},f=>{throw fr(e,f),n._storedError})}function El(e){return dr(e,!1),e._backpressureChangePromise}function hr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ha(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=ur,t.CountQueuingStrategy=sr,t.ReadableByteStreamController=Je,t.ReadableStream=Re,t.ReadableStreamBYOBReader=_t,t.ReadableStreamBYOBRequest=bt,t.ReadableStreamDefaultController=et,t.ReadableStreamDefaultReader=mt,t.TransformStream=lr,t.TransformStreamDefaultController=At,t.WritableStream=wt,t.WritableStreamDefaultController=Ke,t.WritableStreamDefaultWriter=vt,Object.defineProperty(t,"__esModule",{value:!0})})});var ku=T(()=>{if(!globalThis.ReadableStream)try{Object.assign(globalThis,require("stream/web"))}catch{Object.assign(globalThis,Fu())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(o){let a=0,u=this;return new ReadableStream({type:"bytes",async pull(l){let d=await u.slice(a,Math.min(u.size,a+65536)).arrayBuffer();a+=d.byteLength,l.enqueue(new Uint8Array(d)),a===u.size&&l.close()}})})}catch{}});var Hd={};Wl(Hd,{default:()=>os});var sn=require("@raycast/api");var De=require("@raycast/api"),Fo=be(yu());var Pd="en",Cd={year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},Ad={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},Od={year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},Ed={now:{current:"now",future:"in a moment",past:"just now"}},qd={year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},Fd={year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},kd={year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}},gu={locale:Pd,long:Cd,short:Ad,narrow:Od,now:Ed,mini:qd,"short-time":Fd,"long-time":kd};var D=require("@raycast/api");var Fe=require("@raycast/api"),wo="PROJECT_FILES",_u="PAGES";async function Su(t){let r=JSON.stringify(t);await(0,Fe.setLocalStorageItem)(wo,r)}async function wu(){let t=await(0,Fe.getLocalStorageItem)(wo);return t!==void 0?JSON.parse(t):void 0}async function vu(){return await(0,Fe.removeLocalStorageItem)(wo)}async function Ru(t,r){let o=JSON.stringify(t);await(0,Fe.setLocalStorageItem)(`${_u}-${r.key}`,o)}async function Tu(t){let r=await(0,Fe.getLocalStorageItem)(`${_u}-${t.key}`);return r!==void 0?JSON.parse(r):void 0}var st=require("@raycast/api"),Yr=require("react"),vo="VISITED_FIGMA_FILES",Ld=5;async function Bd(){let t=await(0,st.getLocalStorageItem)(vo);return t?JSON.parse(t):[]}async function Dd(t){let r=JSON.stringify(t);await(0,st.setLocalStorageItem)(vo,r)}async function Pu(){return await(0,st.removeLocalStorageItem)(vo)}function Cu(){let[t,r]=(0,Yr.useState)();(0,Yr.useEffect)(()=>{Bd().then(r)},[]);function o(a){let u=[a,...t?.filter(l=>l!==a)??[]].slice(0,Ld);r(u),Dd(u)}return{files:t,visitFile:o,isLoading:!t}}function Ro(){async function t(){let o=await(0,D.showToast)(D.ToastStyle.Animated,"Clearing cache");try{await vu(),o.style=D.ToastStyle.Success,o.title="Cleared cache"}catch(a){o.style=D.ToastStyle.Failure,o.title="Failed clearing cache",o.message=a instanceof Error?a.message:void 0}}async function r(){let o=await(0,D.showToast)(D.ToastStyle.Animated,"Clearing visited files");try{await Pu(),o.style=D.ToastStyle.Success,o.title="Cleared visited files"}catch(a){o.style=D.ToastStyle.Failure,o.title="Failed clearing visited files",o.message=a instanceof Error?a.message:void 0}}return _jsx(_jsxFragment,null,_jsx(D.ActionPanel.Section,{title:"Advanced"},_jsx(D.ActionPanel.Item,{icon:D.Icon.Trash,title:"Clear Visited",onAction:r})),D.environment.isDevelopment&&_jsx(D.ActionPanel.Section,{title:"Development"},_jsx(D.ActionPanel.Item,{icon:D.Icon.Trash,title:"Clear Cache",onAction:t})))}var lt=require("@raycast/api"),Qr=require("react");function Au(t){let[r,o]=(0,Qr.useState)();return(0,Qr.useEffect)(()=>{(0,lt.getApplications)().then(a=>a.find(u=>u.bundleId==="com.figma.Desktop")).then(o)},[]),r?_jsx(lt.OpenAction,{icon:"command-icon.png",title:"Open in Figma",target:`figma://file/${t.file.key}`,application:r,onOpen:()=>t.onVisit(t.file)}):_jsx(lt.OpenInBrowserAction,{url:`https://figma.com/file/${t.file.key}`,onOpen:()=>t.onVisit(t.file)})}var on=require("@raycast/api");var ct=require("@raycast/api");var Gu=be(require("http"),1),Ju=be(require("https"),1),He=be(require("zlib"),1),J=be(require("stream"),1),Zu=be(Eu(),1);var ee=be(require("stream"),1),Oo=require("util");var Um=be(ku(),1),Lu=65536;async function*To(t,r=!0){for(let o of t)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let a=o.byteOffset,u=o.byteOffset+o.byteLength;for(;a!==u;){let l=Math.min(u-a,Lu),m=o.buffer.slice(a,a+l);a+=m.byteLength,yield new Uint8Array(m)}}else yield o;else{let a=0;for(;a!==o.size;){let l=await o.slice(a,Math.min(o.size,a+Lu)).arrayBuffer();a+=l.byteLength,yield new Uint8Array(l)}}}var Bu=class Po{#e=[];#r="";#t=0;constructor(r=[],o={}){let a=0,u=r.map(m=>{let d;return ArrayBuffer.isView(m)?d=new Uint8Array(m.buffer.slice(m.byteOffset,m.byteOffset+m.byteLength)):m instanceof ArrayBuffer?d=new Uint8Array(m.slice(0)):m instanceof Po?d=m:d=new TextEncoder().encode(m),a+=ArrayBuffer.isView(d)?d.byteLength:d.size,d}),l=o.type===void 0?"":String(o.type);this.#r=/[^\u0020-\u007E]/.test(l)?"":l,this.#t=a,this.#e=u}get size(){return this.#t}get type(){return this.#r}async text(){let r=new TextDecoder,o="";for await(let a of To(this.#e,!1))o+=r.decode(a,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let a of To(this.#e,!1))r.set(a,o),o+=a.length;return r.buffer}stream(){let r=To(this.#e,!0);return new ReadableStream({type:"bytes",async pull(o){let a=await r.next();a.done?o.close():o.enqueue(a.value)}})}slice(r=0,o=this.size,a=""){let{size:u}=this,l=r<0?Math.max(u+r,0):Math.min(r,u),m=o<0?Math.max(u+o,0):Math.min(o,u),d=Math.max(m-l,0),p=this.#e,_=[],P=0;for(let S of p){if(P>=d)break;let b=ArrayBuffer.isView(S)?S.byteLength:S.size;if(l&&b<=l)l-=b,m-=b;else{let A;ArrayBuffer.isView(S)?(A=S.subarray(l,Math.min(b,m)),P+=A.byteLength):(A=S.slice(l,Math.min(b,m)),P+=A.size),_.push(A),l=0}}let R=new Po([],{type:String(a).toLowerCase()});return R.#t=d,R.#e=_,R}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Bu.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});var Wd=Bu,Du=Wd;var ke=class extends Error{constructor(r,o){super(r);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var K=class extends ke{constructor(r,o,a){super(r,o);a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Wu=require("crypto");var It=Symbol.toStringTag,Co=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[It]==="URLSearchParams",ce=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[It]);function Jr(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[It]==="FormData"}var Iu=t=>typeof t=="object"&&(t[It]==="AbortSignal"||t[It]==="EventTarget");var ft=`\r
`,Ao="-".repeat(2),Md=Buffer.byteLength(ft),Mu=t=>`${Ao}${t}${Ao}${ft.repeat(2)}`;function zu(t,r,o){let a="";return a+=`${Ao}${t}${ft}`,a+=`Content-Disposition: form-data; name="${r}"`,ce(o)&&(a+=`; filename="${o.name}"${ft}`,a+=`Content-Type: ${o.type||"application/octet-stream"}`),`${a}${ft.repeat(2)}`}var Nu=()=>(0,Wu.randomBytes)(8).toString("hex");async function*ju(t,r){for(let[o,a]of t)yield zu(r,o,a),ce(a)?yield*a.stream():yield a,yield ft;yield Mu(r)}function xu(t,r){let o=0;for(let[a,u]of t)o+=Buffer.byteLength(zu(r,a,u)),o+=ce(u)?u.size:Buffer.byteLength(String(u)),o+=Md;return o+=Buffer.byteLength(Mu(r)),o}var Q=Symbol("Body internals"),Ve=class{constructor(r,{size:o=0}={}){let a=null;r===null?r=null:Co(r)?r=Buffer.from(r.toString()):ce(r)||Buffer.isBuffer(r)||(Oo.types.isAnyArrayBuffer(r)?r=Buffer.from(r):ArrayBuffer.isView(r)?r=Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ee.default||(Jr(r)?(a=`NodeFetchFormDataBoundary${Nu()}`,r=ee.default.Readable.from(ju(r,a))):r=Buffer.from(String(r)))),this[Q]={body:r,boundary:a,disturbed:!1,error:null},this.size=o,r instanceof ee.default&&r.on("error",u=>{let l=u instanceof ke?u:new K(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[Q].error=l})}get body(){return this[Q].body}get bodyUsed(){return this[Q].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:a}=await Zr(this);return r.slice(o,o+a)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[Q].body&&this[Q].body.type||"",o=await this.buffer();return new Du([o],{type:r})}async json(){let r=await Zr(this);return JSON.parse(r.toString())}async text(){return(await Zr(this)).toString()}buffer(){return Zr(this)}};Object.defineProperties(Ve.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function Zr(t){if(t[Q].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Q].disturbed=!0,t[Q].error)throw t[Q].error;let{body:r}=t;if(r===null)return Buffer.alloc(0);if(ce(r)&&(r=ee.default.Readable.from(r.stream())),Buffer.isBuffer(r))return r;if(!(r instanceof ee.default))return Buffer.alloc(0);let o=[],a=0;try{for await(let u of r){if(t.size>0&&a+u.length>t.size){let l=new K(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(l),l}a+=u.length,o.push(u)}}catch(u){throw u instanceof ke?u:new K(`Invalid response body while trying to fetch ${t.url}: ${u.message}`,"system",u)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(u=>typeof u=="string")?Buffer.from(o.join("")):Buffer.concat(o,a)}catch(u){throw new K(`Could not create Buffer from response body for ${t.url}: ${u.message}`,"system",u)}else throw new K(`Premature close of server response while trying to fetch ${t.url}`)}var Xr=(t,r)=>{let o,a,{body:u}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return u instanceof ee.default&&typeof u.getBoundary!="function"&&(o=new ee.PassThrough({highWaterMark:r}),a=new ee.PassThrough({highWaterMark:r}),u.pipe(o),u.pipe(a),t[Q].body=o,u=a),u},Kr=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Co(t)?"application/x-www-form-urlencoded;charset=UTF-8":ce(t)?t.type||null:Buffer.isBuffer(t)||Oo.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:Jr(t)?`multipart/form-data; boundary=${r[Q].boundary}`:t instanceof ee.default?null:"text/plain;charset=UTF-8",$u=t=>{let{body:r}=t;return r===null?0:ce(r)?r.size:Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"?r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null:Jr(r)?xu(t[Q].boundary):null},Uu=(t,{body:r})=>{r===null?t.end():ce(r)?ee.default.Readable.from(r.stream()).pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)};var Eo=require("util"),Wt=be(require("http"),1),en=typeof Wt.default.validateHeaderName=="function"?Wt.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},qo=typeof Wt.default.validateHeaderValue=="function"?Wt.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},G=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof G){let a=r.raw();for(let[u,l]of Object.entries(a))o.push(...l.map(m=>[u,m]))}else if(r!=null)if(typeof r=="object"&&!Eo.types.isBoxedPrimitive(r)){let a=r[Symbol.iterator];if(a==null)o.push(...Object.entries(r));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(u=>{if(typeof u!="object"||Eo.types.isBoxedPrimitive(u))throw new TypeError("Each header pair must be an iterable object");return[...u]}).map(u=>{if(u.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...u]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([a,u])=>(en(a),qo(a,String(u)),[String(a).toLowerCase(),String(u)])):void 0;super(o);return new Proxy(this,{get(a,u,l){switch(u){case"append":case"set":return(m,d)=>(en(m),qo(m,String(d)),URLSearchParams.prototype[u].call(a,String(m).toLowerCase(),String(d)));case"delete":case"has":case"getAll":return m=>(en(m),URLSearchParams.prototype[u].call(a,String(m).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,u,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(r)&&(a=a.toLowerCase()),a}forEach(r,o=void 0){for(let a of this.keys())Reflect.apply(r,o,[this.get(a),a,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let a=this.getAll(o);return o==="host"?r[o]=a[0]:r[o]=a.length>1?a:a[0],r},{})}};Object.defineProperties(G.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function Vu(t=[]){return new G(t.reduce((r,o,a,u)=>(a%2===0&&r.push(u.slice(a,a+2)),r),[]).filter(([r,o])=>{try{return en(r),qo(r,String(o)),!0}catch{return!1}}))}var zd=new Set([301,302,303,307,308]),tn=t=>zd.has(t);var ie=Symbol("Response internals"),$=class extends Ve{constructor(r=null,o={}){super(r,o);let a=o.status!=null?o.status:200,u=new G(o.headers);if(r!==null&&!u.has("Content-Type")){let l=Kr(r);l&&u.append("Content-Type",l)}this[ie]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:u,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ie].type}get url(){return this[ie].url||""}get status(){return this[ie].status}get ok(){return this[ie].status>=200&&this[ie].status<300}get redirected(){return this[ie].counter>0}get statusText(){return this[ie].statusText}get headers(){return this[ie].headers}get highWaterMark(){return this[ie].highWaterMark}clone(){return new $(Xr(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(r,o=302){if(!tn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new $(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new $(null,{status:0,statusText:""});return r[ie].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties($.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Yu=require("url");var Hu=t=>{if(t.search)return t.search;let r=t.href.length-1,o=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-o.length]==="?"?"?":""};var ge=Symbol("Request internals"),rn=t=>typeof t=="object"&&typeof t[ge]=="object",Le=class extends Ve{constructor(r,o={}){let a;rn(r)?a=new URL(r.url):(a=new URL(r),r={});let u=o.method||r.method||"GET";if(u=u.toUpperCase(),(o.body!=null||rn(r))&&r.body!==null&&(u==="GET"||u==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:rn(r)&&r.body!==null?Xr(r):null;super(l,{size:o.size||r.size||0});let m=new G(o.headers||r.headers||{});if(l!==null&&!m.has("Content-Type")){let p=Kr(l,this);p&&m.append("Content-Type",p)}let d=rn(r)?r.signal:null;if("signal"in o&&(d=o.signal),d!=null&&!Iu(d))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");this[ge]={method:u,redirect:o.redirect||r.redirect||"follow",headers:m,parsedURL:a,signal:d},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1}get method(){return this[ge].method}get url(){return(0,Yu.format)(this[ge].parsedURL)}get headers(){return this[ge].headers}get redirect(){return this[ge].redirect}get signal(){return this[ge].signal}clone(){return new Le(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Le.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});var Qu=t=>{let{parsedURL:r}=t[ge],o=new G(t[ge].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(a="0"),t.body!==null){let d=$u(t);typeof d=="number"&&!Number.isNaN(d)&&(a=String(d))}a&&o.set("Content-Length",a),o.has("User-Agent")||o.set("User-Agent","node-fetch"),t.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:u}=t;typeof u=="function"&&(u=u(r)),!o.has("Connection")&&!u&&o.set("Connection","close");let l=Hu(r);return{path:r.pathname+l,pathname:r.pathname,hostname:r.hostname,protocol:r.protocol,port:r.port,hash:r.hash,search:r.search,query:r.query,href:r.href,method:t.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:u}};var Mt=class extends ke{constructor(r,o="aborted"){super(r,o)}};var Nd=new Set(["data:","http:","https:"]);async function Ye(t,r){return new Promise((o,a)=>{let u=new Le(t,r),l=Qu(u);if(!Nd.has(l.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let b=(0,Zu.default)(u.url),A=new $(b,{headers:{"Content-Type":b.typeFull}});o(A);return}let m=(l.protocol==="https:"?Ju.default:Gu.default).request,{signal:d}=u,p=null,_=()=>{let b=new Mt("The operation was aborted.");a(b),u.body&&u.body instanceof J.default.Readable&&u.body.destroy(b),!(!p||!p.body)&&p.body.emit("error",b)};if(d&&d.aborted){_();return}let P=()=>{_(),S()},R=m(l);d&&d.addEventListener("abort",P);let S=()=>{R.abort(),d&&d.removeEventListener("abort",P)};R.on("error",b=>{a(new K(`request to ${u.url} failed, reason: ${b.message}`,"system",b)),S()}),jd(R,b=>{p.body.destroy(b)}),process.version<"v14"&&R.on("socket",b=>{let A;b.prependListener("end",()=>{A=b._eventsCount}),b.prependListener("close",C=>{if(p&&A<b._eventsCount&&!C){let z=new Error("Premature close");z.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",z)}})}),R.on("response",b=>{R.setTimeout(0);let A=Vu(b.rawHeaders);if(tn(b.statusCode)){let Z=A.get("Location"),V=Z===null?null:new URL(Z,u.url);switch(u.redirect){case"error":a(new K(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect")),S();return;case"manual":V!==null&&A.set("Location",V);break;case"follow":{if(V===null)break;if(u.counter>=u.follow){a(new K(`maximum redirect reached at: ${u.url}`,"max-redirect")),S();return}let X={headers:new G(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:u.body,signal:u.signal,size:u.size};if(b.statusCode!==303&&u.body&&r.body instanceof J.default.Readable){a(new K("Cannot follow redirect with body being a readable stream","unsupported-redirect")),S();return}(b.statusCode===303||(b.statusCode===301||b.statusCode===302)&&u.method==="POST")&&(X.method="GET",X.body=void 0,X.headers.delete("content-length")),o(Ye(new Le(V,X))),S();return}default:return a(new TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}d&&b.once("end",()=>{d.removeEventListener("abort",P)});let C=(0,J.pipeline)(b,new J.PassThrough,a);process.version<"v12.10"&&b.on("aborted",P);let z={url:u.url,status:b.statusCode,statusText:b.statusMessage,headers:A,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark},W=A.get("Content-Encoding");if(!u.compress||u.method==="HEAD"||W===null||b.statusCode===204||b.statusCode===304){p=new $(C,z),o(p);return}let U={flush:He.default.Z_SYNC_FLUSH,finishFlush:He.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){C=(0,J.pipeline)(C,He.default.createGunzip(U),a),p=new $(C,z),o(p);return}if(W==="deflate"||W==="x-deflate"){(0,J.pipeline)(b,new J.PassThrough,a).once("data",V=>{C=(V[0]&15)===8?(0,J.pipeline)(C,He.default.createInflate(),a):(0,J.pipeline)(C,He.default.createInflateRaw(),a),p=new $(C,z),o(p)});return}if(W==="br"){C=(0,J.pipeline)(C,He.default.createBrotliDecompress(),a),p=new $(C,z),o(p);return}p=new $(C,z),o(p)}),Uu(R,u)})}function jd(t,r){let o=Buffer.from(`0\r
\r
`),a=!1,u=!1,l;t.on("response",m=>{let{headers:d}=m;a=d["transfer-encoding"]==="chunked"&&!d["content-length"]}),t.on("socket",m=>{let d=()=>{if(a&&!u){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};m.prependListener("close",d),t.on("abort",()=>{m.removeListener("close",d)}),m.on("data",p=>{u=Buffer.compare(p.slice(-5),o)===0,!u&&l&&(u=Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Buffer.compare(p.slice(-2),o.slice(3))===0),l=p})})}var dt=require("react");function Xu(t){let[r,o]=(0,dt.useState)(),a=(0,dt.useRef)();return(0,dt.useEffect)(()=>{console.debug("Fetch pages...");async function u(){a.current?.abort(),a.current=new AbortController;let l=await Tu(t);l&&o(l);let m=await xd(t,a.current.signal);o(m),await Ru(m,t)}return u(),()=>{a.current?.abort()}},[t]),r}async function xd(t,r){let{PERSONAL_ACCESS_TOKEN:o}=(0,ct.getPreferenceValues)();try{return(await(await Ye(`https://api.figma.com/v1/files/${t.key}?depth=1`,{method:"GET",headers:{"Content-Type":"application/json","X-Figma-Token":o},signal:r})).json()).document.children}catch(a){return a instanceof Mt?Promise.resolve([]):(console.error(a),(0,ct.showToast)(ct.ToastStyle.Failure,"Could not load pages"),Promise.resolve([]))}}var Be=require("@raycast/api"),nn=require("react");function Ku(t){let[r,o]=(0,nn.useState)();return(0,nn.useEffect)(()=>{(0,Be.getApplications)().then(a=>a.find(u=>u.bundleId==="com.figma.Desktop")).then(o)},[]),r?_jsx(Be.OpenAction,{title:t.node.name,icon:Be.Icon.Document,target:`figma://file/${t.file.key}?node-id=${t.node.id}`,application:r,onOpen:()=>t.onVisit(t.file)}):_jsx(Be.OpenInBrowserAction,{title:t.node.name,url:`https://figma.com/file/${t.file.key}?node-id=${t.node.id}`,onOpen:()=>t.onVisit(t.file)})}function es(t){let r=Xu(t.file);return _jsx(on.ActionPanel.Submenu,{icon:on.Icon.Document,title:"Open Page",shortcut:{modifiers:["cmd"],key:"p"}},r?.map(o=>_jsx(Ku,{key:o.id,file:t.file,node:o,onVisit:()=>t.onVisit(t.file)})))}Fo.default.addDefaultLocale(gu);var $d=new Fo.default("en-US");function an(t){let{file:r,extraKey:o,onVisit:a}=t,u=String($d.format(new Date(r.last_modified))),l=o?`${r.key}-${o}`:r.key;return _jsx(De.List.Item,{id:l,title:r.name,icon:r.thumbnail_url,accessoryTitle:u,actions:_jsx(De.ActionPanel,null,_jsx(De.ActionPanel.Section,null,_jsx(Au,{file:t.file,onVisit:a}),_jsx(De.CopyToClipboardAction,{content:`https://figma.com/file/${r.key}`})),_jsx(De.ActionPanel.Section,null,_jsx(es,{file:t.file,onVisit:a})),_jsx(Ro,null))})}var ts=require("@raycast/api");function rs(){return _jsx(ts.Detail,{markdown:`
  # Error
  Please check your access token and team ID.  

  ## Access Token
  You can find the Figma access token in your Account Settings > Personal Access Token section

  ## Team ID
  You can extract the team ID by navigating to your team page in Figma and then looking at the URL in the browser, for example:
  https://www.figma.com/files/team/<TEAM_ID>/

  Update the value for <TEAM_ID> in Raycast Preferences > Extensions > Figma...  
  then reopen the command.
  `})}var _e=require("@raycast/api");var un=require("react");function ns(){let[t,r]=(0,un.useState)({projectFiles:void 0,isLoading:!0,hasError:!1});return(0,un.useEffect)(()=>{async function o(){let a=await wu();a&&r(u=>yr(br({},u),{projectFiles:a}));try{let u=await Vd();r(l=>yr(br({},l),{projectFiles:u,isLoading:!1,hasError:!1})),await Su(u)}catch(u){console.error("error fetching files",u),u?.status>=400&&r(l=>yr(br({},l),{isLoading:!1,hasError:!0}))}}o()},[]),t}async function Ud(){let{PERSONAL_ACCESS_TOKEN:t,TEAM_ID:r}=(0,_e.getPreferenceValues)();try{let o=await Ye(`https://api.figma.com/v1/teams/${r}/projects`,{method:"GET",headers:{"Content-Type":"application/json","X-Figma-Token":t}});return o.ok?await o.json():Promise.reject(o)}catch(o){return console.error(o),(0,_e.showToast)(_e.ToastStyle.Failure,"Could not load team"),Promise.resolve({name:"No team found",projects:[]})}}async function Vd(){let{PERSONAL_ACCESS_TOKEN:t}=(0,_e.getPreferenceValues)(),o=(await Ud()).projects.map(async a=>{try{let l=await(await Ye(`https://api.figma.com/v1/projects/${a.id}/files`,{method:"GET",headers:{"Content-Type":"application/json","X-Figma-Token":t}})).json();return{name:a.name,files:l.files}}catch(u){return console.error(u),(0,_e.showToast)(_e.ToastStyle.Failure,"Could not load files"),Promise.resolve([])}});return Promise.all(o)}function os(){let{projectFiles:t,isLoading:r,hasError:o}=ns(),{files:a,visitFile:u,isLoading:l}=Cu(),m=r||l;return o?_jsx(rs,null):_jsx(sn.List,{isLoading:m,searchBarPlaceholder:"Filter files by name..."},_jsx(sn.List.Section,{key:"recent-files",title:"Recent Files"},a?.map(d=>_jsx(an,{key:d.key+"-recent-file",file:d,extraKey:d.key+"-recent-file-item",onVisit:u}))),!l&&t?.map(d=>_jsx(sn.List.Section,{key:d.name+"-project",title:d.name},d.files.filter(p=>a?.find(_=>p.key===_.key)===void 0).map(p=>_jsx(an,{key:p.key+"-file",file:p,onVisit:u})))))}module.exports=Ml(Hd);0&&(module.exports={});
