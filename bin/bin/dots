#!/usr/bin/env bash

DOTS_ROOT=$HOME/projects/personal/dotfiles

PATH=/opt/homebrew/bin/:$PATH

syncRime() {
  make -C $DOTS_ROOT/rime
}

install() {
  make -C $DOTS_ROOT install
}

endot() {
  cd $DOTS_ROOT
  rm encrypted.tar.gz.gpg
  tar czf encrypted.tar.gz etc/.local/share/misc
  gpg -er kkxandeer@gmail.com encrypted.tar.gz
  rm encrypted.tar.gz
}

dedot() {
  cd $DOTS_ROOT
  gpg -do encrypted.tar.gz encrypted.tar.gz.gpg
  tar xvf encrypted.tar.gz
  rm encrypted.tar.gz
}

case "$1" in
  install|i)
    install;;
  rime|r)
    syncRime;;
  endot|e)
    endot;;
  dedot|d)
    dedot;;
  *)
    echo "== ! dots: missing or invalid argument ! =="
    echo "Try again with: install(i)|rime(r)|endot(e)|dedot(d)"
    exit 2
esac
