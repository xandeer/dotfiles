* File Header

This includes some neccessary headers.

#+BEGIN_SRC elisp
;;; config.el -*- lexical-binding: t; -*-
;; Copyright (C) 2020 Xandeer

;; Author: Xandeer <kkxandeer@gmail.com>

;;; Commentary:

;; Xandeer's doom-emacs config file.
#+END_SRC

#+BEGIN_SRC elisp
;;----------------------------------------------------------------------------
;; DO NOT EDIT THIS FILE DIRECTLY
;; This is a file generated from a literate programing source file located at
;; README.org
;;
;; You should make any changes there and regenerate it from Emacs org-mode
;; using C-c C-v t
;;----------------------------------------------------------------------------

;;; Code:
#+END_SRC

* Mode List

Insert several file suffix to ~auto-mode-alist~.

#+BEGIN_SRC elisp
(add-to-list 'auto-mode-alist '("\\.tsx?\\'" . typescript-mode))
(add-to-list 'auto-mode-alist '("\\.zsh-theme\\'" . sh-mode))
(add-to-list 'auto-mode-alist '("\\.zsh\\'" . sh-mode))
(add-to-list 'auto-mode-alist '("zshrc" . sh-mode))
#+END_SRC

* Projectile

#+BEGIN_SRC elisp
(after! projectile
  (dolist (dir '("~/Downloads/" "~/projects/personal/dotfiles/" "~/.emacs.d/"))
    (when (file-directory-p dir)
      (add-to-list 'projectile-known-projects dir))))
#+END_SRC

* Youdao Dictionary

** Define Package

#+header: :tangle (concat (file-name-directory (buffer-file-name)) "packages.el")
#+BEGIN_SRC elisp
(package! youdao-dictionary)
#+END_SRC

** Configuration

#+BEGIN_SRC elisp
(use-package! youdao-dictionary
  :config
  (setq-default
   url-automatic-caching t
   youdao-dictionary-search-history-file (concat doom-cache-dir "youdao.cache")))
#+END_SRC

* Keyfreq

** Define Package

#+header: :tangle (concat (file-name-directory (buffer-file-name)) "packages.el")
#+BEGIN_SRC elisp
(package! keyfreq)
#+END_SRC

** Configuration

#+BEGIN_SRC elisp
(use-package! keyfreq
  :config
  (keyfreq-mode 1)
  (keyfreq-autosave-mode 1))
#+END_SRC

* Custom Evil Buffer End

#+BEGIN_SRC elisp
(defun evil-custom-end-of-buffer-dwim (&rest _)
  "If current line is empty, call `previous-line'."
  (when (looking-at-p "^$")
    (previous-line)))

(advice-add #'end-of-buffer :after #'evil-custom-end-of-buffer-dwim)
#+END_SRC

* Some Autoload Functions

#+BEGIN_SRC elisp
(defun +basic/nth-days-timestamp (n)
  "Return after n days's timestamp like: 2019-05-26 Sun"
  (format-time-string "%F %a"
                      (time-add (current-time) (* 24 3600 n))))

(defun +basic/nth-days-inactive (n)
  (concat "[" (+basic/nth-days-timestamp n) "]"))
#+END_SRC
